/* ==========================================
   NUERLO DASHBOARD - MINIMAL PROFESSIONAL DESIGN
   Design System: Clean, Flat, Engineering-Focused
   Reference: Stripe, Notion, Linear
   ========================================== */

/* ==========================================
   DESIGN TOKENS
   ========================================== */
:root {
    /* Color System - Neutral Palette */
    --color-bg-primary: #f8f8f8;
    --color-bg-secondary: #f0f0f0;
    --color-bg-tertiary: #e8e8e8;
    --color-bg-elevated: #f8f8f8;
    
    --color-border-light: #e5e5e5;
    --color-border-medium: #d4d4d4;
    --color-border-dark: #a3a3a3;
    
    --color-text-primary: #171717;
    --color-text-secondary: #525252;
    --color-text-tertiary: #737373;
    --color-text-quaternary: #a3a3a3;
    
    --color-accent: #171717;
    --color-accent-hover: #404040;
    
    /* Brand Purple - Subtle Accents */
    --color-brand-purple: #a476ff;
    --color-brand-purple-light: rgba(164, 118, 255, 0.1);
    --color-brand-purple-lighter: rgba(164, 118, 255, 0.05);
    --color-brand-purple-dark: #8b5fff;
    
    /* Typography */
    --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'SF Pro Text', 'Segoe UI', system-ui, sans-serif;
    --font-size-xs: 0.75rem;      /* 12px */
    --font-size-sm: 0.8125rem;    /* 13px */
    --font-size-base: 0.875rem;   /* 14px */
    --font-size-md: 0.9375rem;    /* 15px */
    --font-size-lg: 1rem;         /* 16px */
    --font-size-xl: 1.125rem;     /* 18px */
    --font-size-2xl: 1.5rem;      /* 24px */
    --font-size-3xl: 2rem;        /* 32px */
    
    --font-weight-normal: 400;
    --font-weight-medium: 500;
    --font-weight-semibold: 600;
    
    /* Spacing System (8px grid) */
    --space-1: 0.25rem;   /* 4px */
    --space-2: 0.5rem;    /* 8px */
    --space-3: 0.75rem;   /* 12px */
    --space-4: 1rem;      /* 16px */
    --space-5: 1.25rem;   /* 20px */
    --space-6: 1.5rem;    /* 24px */
    --space-8: 2rem;      /* 32px */
    --space-10: 2.5rem;   /* 40px */
    --space-12: 3rem;     /* 48px */
    --space-16: 4rem;     /* 64px */
    
    /* Layout */
    --sidebar-width: 240px;
    --header-height: 56px;
    --border-radius-sm: 4px;
    --border-radius-md: 6px;
    --border-radius-lg: 8px;
    
    /* Shadows - Minimal, Single Layer */
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 1px 3px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 2px 8px rgba(0, 0, 0, 0.08);
}

/* Dark mode tokens - Applied via class on body */
body.dark-mode {
    --color-bg-primary: #0a0a0a;
    --color-bg-secondary: #121212;
    --color-bg-tertiary: #1a1a1a;
    --color-bg-elevated: #1a1a1a;
    
    --color-border-light: #262626;
    --color-border-medium: #333333;
    --color-border-dark: #525252;
    
    --color-text-primary: #fafafa;
    --color-text-secondary: #d4d4d4;
    --color-text-tertiary: #a3a3a3;
    --color-text-quaternary: #737373;
    
    --color-accent: #fafafa;
    --color-accent-hover: #e5e5e5;
    
    /* Brand Purple - Dark Mode Variants */
    --color-brand-purple-light: rgba(164, 118, 255, 0.15);
    --color-brand-purple-lighter: rgba(164, 118, 255, 0.08);
    
    --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
    --shadow-md: 0 1px 3px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 2px 8px rgba(0, 0, 0, 0.4);
}

/* Loading Spinner Animation */
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

/* System preference fallback - only if user hasn't manually set a theme */
@media (prefers-color-scheme: dark) {
    body:not([data-theme]) {
        --color-bg-primary: #0a0a0a;
        --color-bg-secondary: #121212;
        --color-bg-tertiary: #1a1a1a;
        --color-bg-elevated: #1a1a1a;
        
        --color-border-light: #262626;
        --color-border-medium: #333333;
        --color-border-dark: #525252;
        
        --color-text-primary: #fafafa;
        --color-text-secondary: #d4d4d4;
        --color-text-tertiary: #a3a3a3;
        --color-text-quaternary: #737373;
        
        --color-accent: #fafafa;
        --color-accent-hover: #e5e5e5;
        
        --color-brand-purple-light: rgba(164, 118, 255, 0.15);
        --color-brand-purple-lighter: rgba(164, 118, 255, 0.08);
        
        --shadow-sm: 0 1px 2px rgba(0, 0, 0, 0.2);
        --shadow-md: 0 1px 3px rgba(0, 0, 0, 0.3);
        --shadow-lg: 0 2px 8px rgba(0, 0, 0, 0.4);
    }
}

/* ==========================================
   BASE STYLES
   ========================================== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

/* Smooth theme transitions - only applied during theme switching */
html,
body.dashboard-body {
    transition: background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1), 
                color 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* When theme is transitioning, add smooth transitions to all color-related properties */
/* This class is added temporarily by JavaScript during theme switch */
body.theme-transitioning,
body.theme-transitioning *:not(svg):not(svg *):not(img):not(video):not(iframe):not(canvas) {
    transition: background-color 0.2s cubic-bezier(0.4, 0, 0.2, 1), 
                color 0.2s cubic-bezier(0.4, 0, 0.2, 1), 
                border-color 0.2s cubic-bezier(0.4, 0, 0.2, 1), 
                box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                fill 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                stroke 0.2s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

body.dashboard-body {
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
    line-height: 1.5;
    color: var(--color-text-primary);
    background: var(--color-bg-primary);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overscroll-behavior-y: none;
    overflow: hidden;
}

/* ==========================================
   LOADING SCREEN
   ========================================== */
.loading-screen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: var(--color-bg-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    opacity: 1;
    visibility: visible;
    transition: opacity 0.4s ease, visibility 0.4s ease;
    perspective: 1000px; /* Enable 3D transforms */
}

.loading-screen.hidden {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
}

.loading-logo {
    display: flex;
    align-items: center;
    justify-content: center;
    transform-style: preserve-3d;
}

.loading-logo img {
    width: 64px;
    height: 64px;
    opacity: 0.8;
    transition: opacity 0.3s ease, transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    transform: scale(1) translateZ(0);
}

/* Light mode: darker logo, dark mode: lighter logo */
body.light-mode .loading-logo img {
    opacity: 0.6;
}

body.dark-mode .loading-logo img {
    opacity: 0.9;
}

/* Animation: Logo zooms towards screen and fades out */
.loading-screen.hidden .loading-logo img {
    animation: logoZoomOut 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes logoZoomOut {
    0% {
        transform: scale(1) translateZ(0);
        opacity: 0.8;
    }
    50% {
        transform: scale(1.8) translateZ(150px);
        opacity: 0.4;
    }
    100% {
        transform: scale(2.2) translateZ(300px);
        opacity: 0;
    }
}

/* Dark mode logo opacity in animation */
body.dark-mode .loading-screen.hidden .loading-logo img {
    animation: logoZoomOutDark 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes logoZoomOutDark {
    0% {
        transform: scale(1) translateZ(0);
        opacity: 0.9;
    }
    50% {
        transform: scale(1.8) translateZ(150px);
        opacity: 0.4;
    }
    100% {
        transform: scale(2.2) translateZ(300px);
        opacity: 0;
    }
}

/* Light mode logo opacity in animation */
body.light-mode .loading-screen.hidden .loading-logo img {
    animation: logoZoomOutLight 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

@keyframes logoZoomOutLight {
    0% {
        transform: scale(1) translateZ(0);
        opacity: 0.6;
    }
    50% {
        transform: scale(1.8) translateZ(150px);
        opacity: 0.3;
    }
    100% {
        transform: scale(2.2) translateZ(300px);
        opacity: 0;
    }
}

/* ==========================================
   SIDEBAR
   ========================================== */
.dashboard-sidebar {
    position: fixed;
    left: 0;
    top: 0;
    width: var(--sidebar-width);
    height: 100vh;
    background: var(--color-bg-primary);
    border-right: 1px solid var(--color-border-light);
    display: flex;
    flex-direction: column;
    z-index: 100;
    transition: width 0.2s ease;
}

/* Collapsed State */
.dashboard-sidebar.collapsed {
    width: 64px;
}

.dashboard-sidebar.collapsed .sidebar-logo img {
    opacity: 1;
    width: auto;
    height: 24px;
}

.dashboard-sidebar.collapsed .sidebar-section-title {
    opacity: 0;
    height: auto;
    margin-bottom: var(--space-3);
    padding: 0 var(--space-4);
    overflow: hidden;
    transition: opacity 0.2s ease;
    visibility: hidden;
}

/* On mobile, always show section titles regardless of collapsed state - MUST come after collapsed rule */
@media (max-width: 768px) {
    /* Override collapsed state completely on mobile */
    .dashboard-sidebar.collapsed .sidebar-section-title {
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
        height: auto !important;
        max-height: none !important;
        overflow: visible !important;
    }
    
    .dashboard-sidebar .sidebar-section-title,
    .dashboard-sidebar.open .sidebar-section-title,
    .dashboard-sidebar.open.collapsed .sidebar-section-title,
    .sidebar-section-title {
        opacity: 1 !important;
        visibility: visible !important;
        display: block !important;
        height: auto !important;
        max-height: none !important;
        overflow: visible !important;
        padding: 0 var(--space-4) !important;
        margin-bottom: var(--space-3) !important;
        margin-top: var(--space-4) !important;
    }
    
    .sidebar-section:first-of-type .sidebar-section-title {
        margin-top: 0 !important;
    }
}

.dashboard-sidebar.collapsed .nav-link span {
    opacity: 0;
    max-width: 0;
    overflow: hidden;
    margin: 0;
    padding: 0;
    width: 0;
    flex-shrink: 0;
}

.dashboard-sidebar.collapsed .nav-link {
    justify-content: center;
    padding: var(--space-2) var(--space-4);
    align-items: center;
    gap: 0;
    position: relative;
    height: calc(16px + var(--space-2) * 2);
}

.dashboard-sidebar.collapsed .nav-link svg {
    margin: 0;
    flex-shrink: 0;
    width: 16px;
    height: 16px;
    position: relative;
    flex: 0 0 16px;
}

/* Collapse button rotation - when collapsed, arrow points right (>) */
.dashboard-sidebar.collapsed .sidebar-collapse-btn svg {
    transform: rotate(180deg);
}

.dashboard-sidebar.collapsed .nav-link {
    position: relative;
}

/* Tooltip for collapsed nav items */
.dashboard-sidebar.collapsed .nav-link::after {
    content: attr(data-tooltip);
    position: absolute;
    left: calc(100% + 8px);
    background: var(--color-bg-elevated);
    color: var(--color-text-primary);
    padding: var(--space-1) var(--space-2);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    font-size: var(--font-size-xs);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    z-index: 1000;
    transition: opacity 0.15s ease;
    box-shadow: var(--shadow-md);
}

.dashboard-sidebar.collapsed .nav-link:hover::after {
    opacity: 1;
}

/* Mobile profile section - hidden on desktop by default */
.sidebar-mobile-profile {
    display: none;
}

.sidebar-mobile-close-btn {
    display: none;
}

.sidebar-header {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: var(--space-3);
    height: var(--header-height);
    border-bottom: 1px solid var(--color-border-light);
}

.dashboard-sidebar.collapsed .sidebar-header {
    justify-content: center;
    padding: var(--space-3);
}

.sidebar-logo {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: flex-start;
}

.dashboard-sidebar.collapsed .sidebar-logo {
    flex: 0;
    justify-content: center;
}

.sidebar-logo img {
    height: 24px;
    width: auto;
    transition: opacity 0.15s ease;
}

.sidebar-collapse-btn {
    position: absolute;
    right: -14px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-light);
    border-radius: 50%;
    color: var(--color-text-tertiary);
    cursor: pointer;
    padding: 0;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    z-index: 101;
    box-shadow: var(--shadow-sm);
}

.dashboard-sidebar.collapsed .sidebar-collapse-btn {
    right: -14px;
    transform: translateY(-50%);
}

.sidebar-collapse-btn:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
    border-color: var(--color-border-medium);
}

.sidebar-collapse-btn svg {
    width: 14px;
    height: 14px;
    transition: transform 0.15s ease;
}

.sidebar-toggle {
    display: none;
    background: none;
    border: none;
    color: var(--color-text-tertiary);
    cursor: pointer;
    padding: var(--space-2);
}

.sidebar-content {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-4) 0;
}

.sidebar-section {
    margin-bottom: var(--space-8);
    transition: margin-bottom 0.2s ease;
    position: relative;
}

.dashboard-sidebar.collapsed .sidebar-section {
    margin-bottom: var(--space-8);
}

.sidebar-section-title {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-quaternary);
    padding: 0 var(--space-4);
    margin-bottom: var(--space-3);
    transition: opacity 0.2s ease, max-height 0.2s ease, margin 0.2s ease, padding 0.2s ease;
    overflow: hidden;
}

.sidebar-nav {
    list-style: none;
}

.nav-item {
    margin: 0;
}

.nav-link {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-3);
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    transition: color 0.15s ease, background 0.15s ease;
    position: relative;
    height: calc(16px + var(--space-2) * 2);
    box-sizing: border-box;
    border-radius: 0;
}

.nav-link span {
    transition: opacity 0.2s ease, max-width 0.2s ease;
    white-space: nowrap;
    display: inline-block;
}

.nav-link:hover {
    color: var(--color-text-primary);
    background: var(--color-bg-secondary);
    border-radius: 6px;
}

.nav-link svg,
.nav-link img {
    width: 16px;
    height: 16px;
    opacity: 0.6;
    flex-shrink: 0;
    transition: opacity 0.2s ease;
    position: relative;
    display: block;
}

.nav-item.active .nav-link {
    color: var(--color-brand-purple);
    background: transparent;
    border-left: none;
    padding: var(--space-2) var(--space-3);
}

.dashboard-sidebar.collapsed .nav-item.active .nav-link {
    padding: var(--space-2) var(--space-4);
}

.nav-item.active .nav-link svg,
.nav-item.active .nav-link img {
    opacity: 1;
    color: var(--color-brand-purple);
}

.nav-item.active .nav-link path,
.nav-item.active .nav-link circle,
.nav-item.active .nav-link line,
.nav-item.active .nav-link polyline,
.nav-item.active .nav-link rect {
    stroke: var(--color-brand-purple);
}

/* ==========================================
   MAIN CONTENT
   ========================================== */
.dashboard-main {
    margin-left: var(--sidebar-width);
    height: 100vh;
    background: var(--color-bg-primary);
    transition: margin-left 0.2s ease;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    overscroll-behavior: none;
}

.dashboard-sidebar.collapsed ~ .dashboard-main {
    margin-left: 64px;
}

/* ==========================================
   HEADER
   ========================================== */
.dashboard-header {
    position: fixed;
    top: 0;
    left: var(--sidebar-width);
    right: 0;
    flex-shrink: 0;
    z-index: 100;
    height: var(--header-height);
    background: var(--color-bg-primary);
    border-bottom: 1px solid var(--color-border-light);
    display: flex;
    align-items: center;
    padding: 0 var(--space-5);
    gap: var(--space-4);
    transition: left 0.2s ease;
}

.dashboard-sidebar.collapsed ~ .dashboard-main .dashboard-header,
body:has(.dashboard-sidebar.collapsed) .dashboard-header {
    left: 64px;
}

.mobile-menu-btn {
    display: none;
}

.header-left {
    flex: 0 0 auto;
}

.dashboard-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
}

#userName {
    color: var(--color-text-secondary);
}

.header-center {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    justify-content: center;
    max-width: 600px;
    width: 100%;
}

.header-search-bar {
    position: relative;
    width: 100%;
    max-width: 600px;
}

.header-search-icon {
    position: absolute;
    left: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-text-quaternary);
    pointer-events: none;
    z-index: 1;
    transition: color 0.15s ease;
}

.header-search-bar:hover .header-search-icon {
    color: white;
}

.header-search-input {
    width: 100%;
    padding: var(--space-2) var(--space-3) var(--space-2) 36px;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    font-family: var(--font-family);
    font-size: var(--font-size-sm);
    color: var(--color-text-primary);
    transition: border-color 0.15s ease;
    padding-right: 32px;
}

.header-search-input:focus {
    outline: none;
    border-color: var(--color-border-medium);
    background: var(--color-bg-secondary);
}

.header-search-input::placeholder {
    color: var(--color-text-quaternary);
}

.header-search-shortcut {
    position: absolute;
    right: var(--space-3);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-text-quaternary);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease;
    z-index: 1;
    background: var(--color-bg-tertiary);
    padding: 2px 6px;
    border-radius: 3px;
    border: 1px solid var(--color-border-light);
    font-family: var(--font-family);
    line-height: 1;
}

.header-search-bar:hover .header-search-shortcut {
    opacity: 1;
}

.header-search-input:focus ~ .header-search-shortcut,
.header-search-input:not(:placeholder-shown) ~ .header-search-shortcut {
    opacity: 0;
}

/* Search Dropdown */
.header-search-dropdown {
    position: absolute;
    top: calc(100% + var(--space-2));
    left: 0;
    right: 0;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-lg);
    max-height: 400px;
    overflow-y: auto;
    display: none;
    z-index: 1000;
    margin-top: var(--space-1);
}

.header-search-dropdown.show {
    display: block;
}

.header-search-suggestions {
    padding: var(--space-2) 0;
}

/* Search Item Styles */
.header-search-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-3) var(--space-4);
    cursor: pointer;
    transition: background-color 0.15s ease;
    border: none;
    background: transparent;
    width: 100%;
    text-align: left;
}

.header-search-item:hover {
    background: var(--color-bg-tertiary);
}

/* Ensure hover is visible - use slightly darker shade for better contrast */
body.light-mode .header-search-item:hover {
    background: #f0f0f0;
}

body.dark-mode .header-search-item:hover {
    background: #1f1f1f;
}

.header-search-item-content {
    flex: 1;
    min-width: 0;
}

.header-search-item-title {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
    margin-bottom: 2px;
    line-height: 1.4;
}

.search-highlight {
    background: transparent;
    color: var(--color-brand-purple);
    font-weight: var(--font-weight-semibold);
    padding: 0;
    border-radius: 2px;
}

body.dark-mode .search-highlight {
    background: transparent;
    color: var(--color-brand-purple);
}

.header-search-item-meta {
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
    line-height: 1.4;
    margin-top: 2px;
}

.header-search-item.no-results {
    cursor: default;
    color: var(--color-text-tertiary);
    font-size: var(--font-size-sm);
}

.header-search-item.no-results:hover {
    background: transparent;
}

.header-search-item.selected {
    background: var(--color-bg-tertiary);
    outline: 2px solid var(--color-brand-purple);
    outline-offset: -2px;
}

body.light-mode .header-search-item.selected {
    background: #f0f0f0;
}

body.dark-mode .header-search-item.selected {
    background: #1f1f1f;
}

.header-search-suggestions {
    max-height: 400px;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--color-border) transparent;
}

.header-search-suggestions::-webkit-scrollbar {
    width: 6px;
}

.header-search-suggestions::-webkit-scrollbar-track {
    background: transparent;
}

.header-search-suggestions::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 3px;
}

.header-search-suggestions::-webkit-scrollbar-thumb:hover {
    background: var(--color-text-tertiary);
}

/* Profile field highlight - highlights entire field including label, description, and toggle */
.profile-field.search-highlight-field {
    position: relative;
}

.profile-field.search-highlight-field .profile-field-label {
    color: var(--color-brand-purple) !important;
    transition: color 0.8s ease-out;
}

.profile-field.search-highlight-field .profile-field-value,
.profile-field.search-highlight-field .profile-field-value span {
    color: var(--color-brand-purple) !important;
    transition: color 0.8s ease-out;
}

.profile-field.search-highlight-field .toggle-slider {
    outline: 2px solid var(--color-brand-purple) !important;
    outline-offset: 2px;
    border-radius: 24px !important; /* Match the pill shape of the toggle */
    transition: outline-color 0.8s ease-out, outline-width 0.8s ease-out;
}

/* Also highlight the settings section title when a field within it is highlighted */
.settings-section-title.search-highlight-title {
    color: var(--color-brand-purple) !important;
    transition: color 0.8s ease-out;
}

/* Section highlight for search - removed, using text highlight only */

@keyframes searchPulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.002);
    }
    100% {
        transform: scale(1);
    }
}

@keyframes searchFade {
    0% {
        opacity: 1;
    }
    70% {
        opacity: 1;
    }
    100% {
        opacity: 0;
    }
}

/* Recent Searches Section */
.header-search-section {
    padding: var(--space-2) 0;
}

.header-search-section-title {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-quaternary);
    padding: var(--space-2) var(--space-4) var(--space-1);
    margin: 0;
}

.header-search-divider {
    height: 1px;
    background: var(--color-border-light);
    margin: var(--space-2) var(--space-4);
}

.header-search-clear {
    position: absolute;
    right: var(--space-2);
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: var(--color-text-quaternary);
    cursor: pointer;
    padding: var(--space-1);
    font-size: var(--font-size-lg);
    line-height: 1;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius-sm);
    transition: background-color 0.1s ease, color 0.1s ease;
}

.header-search-clear:hover {
    background: var(--color-bg-tertiary);
    color: var(--color-text-primary);
}

.header-search-remove {
    background: none;
    border: none;
    color: var(--color-text-quaternary);
    cursor: pointer;
    padding: var(--space-1);
    font-size: var(--font-size-lg);
    line-height: 1;
    width: 20px;
    height: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius-sm);
    transition: background-color 0.1s ease, color 0.1s ease;
    flex-shrink: 0;
    opacity: 0;
}

.header-search-item:hover .header-search-remove {
    opacity: 1;
}

.header-search-remove:hover {
    background: none;
    color: var(--color-text-primary);
}

.header-right {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-left: auto;
    position: relative;
}

.header-actions {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    position: relative;
}

.header-icon-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    background: transparent;
    border: none;
    border-radius: 50%;
    color: var(--color-text-secondary);
    cursor: pointer;
    transition: background-color 0.15s ease, color 0.15s ease;
    padding: 0;
}

.theme-toggle-btn {
    position: relative;
}

.theme-icon {
    position: absolute;
    transition: opacity 0.2s ease, transform 0.2s ease;
    pointer-events: none;
}

/* Light mode: dark icon */
body.light-mode #themeToggle svg * {
    stroke: #171717 !important;
}

/* Dark mode: white icon */
body.dark-mode #themeToggle svg * {
    stroke: #fafafa !important;
}

.theme-icon-sun {
    opacity: 1;
    transform: rotate(0deg);
}

.theme-icon-moon {
    opacity: 0;
    transform: rotate(90deg);
}

/* When dark mode is active, show moon icon */
body.dark-mode .theme-icon-sun {
    opacity: 0;
    transform: rotate(-90deg);
}

body.dark-mode .theme-icon-moon {
    opacity: 1;
    transform: rotate(0deg);
}

/* When light mode is active, show sun icon */
body.light-mode .theme-icon-sun {
    opacity: 1;
    transform: rotate(0deg);
}

body.light-mode .theme-icon-moon {
    opacity: 0;
    transform: rotate(90deg);
}

.header-icon-btn:hover {
    background: var(--color-bg-tertiary);
    color: var(--color-text-primary);
}

.user-profile-mini {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    padding: var(--space-1) var(--space-2) var(--space-1) var(--space-1);
    border: none;
    background: transparent;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: color 0.15s ease;
}

.user-profile-mini:hover {
    background: transparent;
}

.user-avatar {
    width: 28px;
    height: 28px;
    border-radius: 50%;
    background: var(--color-bg-tertiary);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-secondary);
}

.user-name-mini {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
}

/* ==========================================
   NOTIFICATIONS DROPDOWN
   ========================================== */
/* Header Dropdown Base Styles - matches search dropdown */
.header-dropdown {
    position: absolute;
    top: calc(100% + var(--space-2));
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    margin-top: var(--space-1);
    display: none;
}

.header-dropdown.show {
    display: block;
}

.notifications-dropdown {
    right: 0;
    width: 360px;
    max-width: calc(100vw - var(--space-4));
    flex-direction: column;
    max-height: 480px;
    overflow: hidden;
}

.notifications-dropdown.show {
    display: flex;
}

.notifications-header {
    padding: var(--space-5) var(--space-6);
    border-bottom: 1px solid var(--color-border-light);
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-shrink: 0;
}

.notifications-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
}

.notifications-content {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-4) var(--space-6);
    min-height: 200px;
}

.notification-empty {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: var(--space-10) var(--space-6);
    text-align: center;
    color: var(--color-text-tertiary);
}

.notification-empty svg {
    opacity: 0.3;
    margin-bottom: var(--space-4);
}

.notification-empty p {
    font-size: var(--font-size-sm);
    margin: 0;
}

/* Notification items */
.notification-item {
    padding: var(--space-4) var(--space-6);
    border-bottom: 1px solid var(--color-border-light);
    transition: background-color 0.15s ease;
    cursor: pointer;
}

.notification-item:last-child {
    border-bottom: none;
}

.notification-item:hover {
    background-color: var(--color-bg-tertiary);
}

.notification-item:first-child {
    margin-top: 0;
}

/* Desktop optimizations for notifications dropdown */
@media (min-width: 769px) {
    .notifications-dropdown {
        width: 400px;
    }
    
    .notifications-header {
        padding: var(--space-6) var(--space-6);
    }
    
    .notifications-content {
        padding: var(--space-5) var(--space-6);
    }
    
    .notification-empty {
        padding: var(--space-12) var(--space-6);
    }
    
    .notification-item {
        padding: var(--space-5) var(--space-6);
    }
}

/* Add Dropdown Styles */
.add-dropdown {
    right: 0;
    min-width: 200px;
    max-width: 280px;
}

.add-dropdown-content {
    padding: var(--space-2) 0;
}

.add-dropdown-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    width: 100%;
    padding: var(--space-3) var(--space-4);
    background: transparent;
    border: none;
    text-align: left;
    cursor: pointer;
    transition: background-color 0.15s ease;
    color: var(--color-text-primary);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-normal);
}

.add-dropdown-item:hover {
    background: var(--color-bg-tertiary);
}

body.light-mode .add-dropdown-item:hover {
    background: #f0f0f0;
}

body.dark-mode .add-dropdown-item:hover {
    background: #1f1f1f;
}

.add-dropdown-item svg {
    flex-shrink: 0;
    color: var(--color-text-secondary);
    transition: color 0.15s ease;
}

.add-dropdown-item:hover svg {
    color: var(--color-text-primary);
}

.add-dropdown-item.active {
    color: var(--color-brand-purple) !important;
}

.add-dropdown-item.active span {
    color: var(--color-brand-purple) !important;
}

.add-dropdown-item.active svg {
    color: var(--color-brand-purple) !important;
    opacity: 1;
}

/* Force stroke color on all SVG elements - override currentColor */
.add-dropdown-item.active svg * {
    stroke: var(--color-brand-purple) !important;
    fill: none !important;
}

/* Handle any filled elements */
.add-dropdown-item.active svg[fill="currentColor"] *,
.add-dropdown-item.active svg path[fill],
.add-dropdown-item.active svg circle[fill],
.add-dropdown-item.active svg rect[fill] {
    fill: var(--color-brand-purple) !important;
    stroke: none !important;
}

.add-dropdown-divider {
    height: 1px;
    background: var(--color-border-light);
    margin: var(--space-2) 0;
}

/* ==========================================
   CONTENT SECTIONS
   ========================================== */
.dashboard-content {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: var(--space-6) var(--space-6);
    padding-top: calc(var(--header-height) + var(--space-6));
    overscroll-behavior: contain;
    -webkit-overflow-scrolling: touch;
}

.content-section {
        display: none;
    }

.content-section.active {
        display: block;
        animation: fadeIn 0.3s ease;
    }

.content-section.active > *:first-child {
    margin-top: 0;
    padding-top: 0;
}

/* Section Headers */
.section-header {
    margin-bottom: var(--space-2);
}

.section-title {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin-bottom: var(--space-2);
    margin-top: 0;
}

.section-description {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    max-width: 600px;
}

/* ==========================================
   STATS GRID
   ========================================== */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: var(--space-4);
    margin-bottom: var(--space-8);
}

.stat-card {
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 0;
    position: relative;
}

.stat-label {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-normal);
    color: var(--color-text-tertiary);
    margin-bottom: var(--space-3);
    text-transform: uppercase;
    letter-spacing: 0.02em;
}

.stat-value {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    line-height: 1.1;
    margin-bottom: var(--space-1);
}

.stat-value span {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-normal);
    color: var(--color-text-tertiary);
    margin-left: 0.25rem;
}

.stat-change {
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
    margin-top: var(--space-2);
    opacity: 0.6;
}

.stat-change.positive {
    color: var(--color-text-secondary);
}

.stat-change.negative {
    color: var(--color-text-tertiary);
}

/* ==========================================
   CARDS & CONTAINERS
   ========================================== */
.card {
    background: transparent;
    border: none;
    border-radius: 0;
    padding: 0;
    margin-bottom: var(--space-8);
}

#profile .card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(0, 0, 0, 0.05);
    border-radius: var(--border-radius-lg);
    padding: var(--space-6);
    margin-bottom: var(--space-6);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: all 0.2s ease;
}

body.light-mode #profile .card {
    background: rgba(255, 255, 255, 0.4);
    border: 1px solid rgba(0, 0, 0, 0.06);
}

body.dark-mode #profile .card {
    background: rgba(255, 255, 255, 0.02);
    border: 1px solid rgba(255, 255, 255, 0.08);
}

#profile .card:hover {
    background: rgba(255, 255, 255, 0.03);
    border-color: rgba(0, 0, 0, 0.08);
}

body.light-mode #profile .card:hover {
    background: rgba(255, 255, 255, 0.5);
    border-color: rgba(0, 0, 0, 0.08);
}

body.dark-mode #profile .card:hover {
    background: rgba(255, 255, 255, 0.03);
    border-color: rgba(255, 255, 255, 0.12);
}

.card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: var(--space-6);
}

.card-title-with-icon {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.card-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin: 0;
}

.card-action {
    font-size: var(--font-size-sm);
    color: var(--color-text-tertiary);
    text-decoration: none;
    font-weight: var(--font-weight-medium);
}

.card-action:hover {
    color: #ffffff;
}

/* ==========================================
   BUTTONS
   ========================================== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    padding: var(--space-2) var(--space-4);
    font-family: var(--font-family);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
    text-decoration: none;
    border: none;
        white-space: nowrap;
}

.btn-primary {
    background: var(--color-brand-purple);
    color: var(--color-bg-primary);
}

.btn-primary:hover {
    background: var(--color-brand-purple-dark);
}

.btn-secondary {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-light);
}

.btn-secondary:hover {
    background: var(--color-bg-tertiary);
    border-color: var(--color-border-medium);
}

.btn-ghost {
    background: transparent;
    color: var(--color-text-secondary);
}

.btn-ghost:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
}

.btn-sm {
    padding: var(--space-1) var(--space-3);
    font-size: var(--font-size-xs);
}

.btn-lg {
    padding: var(--space-3) var(--space-5);
    font-size: var(--font-size-base);
}

/* ==========================================
   PROGRAM/COURSE CARDS
   ========================================== */
.programs-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 48px 32px;
}

/* ==========================================
   PROGRAM CARD - SUBTLE PROFESSIONAL DESIGN
   ========================================== */
.program-card {
    background: none;
    border: none;
    padding: 0;
    transition: opacity 0.2s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    height: 100%;
    gap: 0;
}

.program-card:hover {
    opacity: 0.8;
}

.program-thumbnail {
    width: 100%;
    aspect-ratio: 16 / 9;
    flex-shrink: 0;
    background: #1a1a1a;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    position: relative;
    border-radius: 0;
    margin-bottom: var(--space-4);
}

/* Light mode thumbnail background */
body.light-mode .program-thumbnail {
    background: var(--color-bg-tertiary);
}

.program-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

.program-content {
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    flex: 1;
}

.program-header {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.program-title {
    font-size: 16px;
    font-weight: 500;
    color: var(--color-text-primary);
    margin: 0 0 var(--space-2) 0;
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.program-meta {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: 13px;
    color: var(--color-text-tertiary);
    font-weight: 400;
    margin-bottom: var(--space-3);
}

.program-header {
    display: flex;
    flex-direction: column;
    gap: 0;
}

/* ==========================================
   MARKETPLACE GRID - Ensures proper layout (2 columns)
   ========================================== */
#marketplaceGrid.marketplace-grid,
#marketplaceGrid.programs-grid,
.marketplace-grid {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: var(--space-6) !important;
}

/* Override programs-grid for marketplace */
#marketplaceGrid.programs-grid {
    grid-template-columns: repeat(2, 1fr) !important;
}

/* Ensure recommendedGrid uses marketplace styling (2 columns) - ALWAYS applied */
div#recommendedGrid,
#overview div#recommendedGrid,
section#overview div#recommendedGrid {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 24px !important;
    width: 100% !important;
    min-height: 200px !important;
}

div#recommendedGrid .marketplace-course-card,
#overview div#recommendedGrid .marketplace-course-card,
section#overview div#recommendedGrid .marketplace-course-card {
    background: var(--color-bg-elevated) !important;
    border: 1px solid var(--color-border-light) !important;
    border-radius: var(--border-radius-lg) !important;
    overflow: hidden !important;
    transition: transform 0.15s ease, box-shadow 0.15s ease !important;
    display: flex !important;
    flex-direction: column !important;
    cursor: pointer !important;
    position: relative !important;
    min-height: 400px !important;
    width: 100% !important;
}

/* Responsive: 1 column on mobile */
@media (max-width: 768px) {
    #marketplaceGrid.marketplace-grid,
    #marketplaceGrid.programs-grid,
    .marketplace-grid,
    div#recommendedGrid,
    #overview div#recommendedGrid,
    section#overview div#recommendedGrid {
        grid-template-columns: 1fr !important;
    }
}

/* ==========================================
   MARKETPLACE COURSE CARD - MODERN DESIGN
   ========================================== */
.marketplace-course-card {
    background: var(--color-bg-elevated);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    display: flex;
    flex-direction: column;
    cursor: pointer;
    position: relative;
    min-height: 400px;
}

.marketplace-course-card:hover {
    border-color: var(--color-border-medium);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

/* Background image covers entire card */
.marketplace-course-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: var(--course-image, none);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;
    background-color: var(--color-bg-tertiary);
    z-index: 0;
    transition: transform 0.3s ease;
}

.marketplace-course-card:hover::before {
    transform: scale(1.02);
}

/* Overlay gradient for readability */
.marketplace-course-card::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.3) 0%, rgba(0, 0, 0, 0.6) 60%, rgba(0, 0, 0, 0.85) 100%);
    z-index: 1;
}

body.dark-mode .marketplace-course-card::after {
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0.7) 60%, rgba(0, 0, 0, 0.95) 100%);
}

.marketplace-course-image {
    display: none; /* Hide the image element, using background instead */
}

.marketplace-course-favorite {
    position: absolute;
    top: var(--space-3);
    right: var(--space-3);
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid var(--color-border-light);
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
    z-index: 10;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

body.dark-mode .marketplace-course-favorite {
    background: rgba(10, 10, 10, 0.95);
}

.marketplace-course-favorite:hover {
    background: rgba(255, 255, 255, 1);
    border-color: var(--color-border-medium);
    transform: scale(1.05);
}

body.dark-mode .marketplace-course-favorite:hover {
    background: rgba(26, 26, 26, 1);
}

.marketplace-course-favorite svg {
    width: 18px;
    height: 18px;
    stroke: var(--color-text-secondary);
    fill: none;
    transition: transform 0.15s ease, opacity 0.15s ease;
}

.marketplace-course-favorite.favorited svg {
    fill: var(--color-brand-purple);
    stroke: var(--color-brand-purple);
}

.marketplace-course-content {
    padding: var(--space-5);
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    flex: 1;
    position: relative;
    z-index: 2;
    justify-content: flex-end;
}

.marketplace-course-header {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    position: absolute;
    top: var(--space-5);
    left: var(--space-5);
    right: var(--space-5);
    z-index: 3;
}

.marketplace-course-title {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: #ffffff;
    line-height: 1.3;
    margin: 0;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.marketplace-course-description {
    font-size: var(--font-size-sm);
    color: rgba(255, 255, 255, 0.85);
    line-height: 1.4;
    margin: 0;
    margin-top: 0;
    opacity: 0;
    transform: translateY(-8px);
    max-height: 0;
    overflow: hidden;
    transition: opacity 0.3s ease, transform 0.3s ease, max-height 0.3s ease, margin-top 0.3s ease;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
}

.marketplace-course-card:hover .marketplace-course-description {
    opacity: 1;
    transform: translateY(0);
    max-height: 72px;
    margin-top: var(--space-2);
}

.marketplace-course-rating {
    display: flex;
    align-items: center;
    gap: var(--space-2);
    font-size: var(--font-size-xs);
    color: rgba(255, 255, 255, 0.9);
    margin-bottom: var(--space-3);
    padding-bottom: var(--space-3);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.marketplace-course-stars {
    display: flex;
    align-items: center;
    gap: 2px;
}

.marketplace-course-stars svg {
    width: 14px;
    height: 14px;
    color: var(--color-brand-purple);
    filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3));
}

.marketplace-course-rating-number {
    font-weight: var(--font-weight-medium);
    color: #ffffff;
    margin-left: var(--space-1);
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.marketplace-course-students {
    color: rgba(255, 255, 255, 0.8);
    margin-left: auto;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

.marketplace-course-actions {
    display: flex;
    align-items: flex-end;
    gap: var(--space-3);
    margin-top: 0;
    padding-top: var(--space-4);
    border-top: none;
}

.marketplace-course-enroll-btn {
    flex: 1;
    padding: 12px 0;
    background: rgba(255, 255, 255, 0.08);
    color: #ffffff;
    border: none;
    border-radius: 4px;
    font-size: 13px;
    font-weight: 500;
    font-family: var(--font-family);
    cursor: pointer;
    transition: all 0.15s ease;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
}

.marketplace-course-enroll-btn:hover {
    background: rgba(255, 255, 255, 0.15);
}

.marketplace-course-enroll-btn:active {
    transform: scale(0.98);
}

body.dark-mode .marketplace-course-enroll-btn {
    background: rgba(255, 255, 255, 0.08);
    color: #ffffff;
}

body.dark-mode .marketplace-course-enroll-btn:hover {
    background: rgba(255, 255, 255, 0.15);
}

.marketplace-course-favorite-small {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: transform 0.15s ease, opacity 0.15s ease;
    flex-shrink: 0;
    padding: 0;
}

.marketplace-course-favorite-small:hover {
    transform: scale(1.1);
}

.marketplace-course-favorite-small svg {
    width: 20px;
    height: 20px;
    stroke: rgba(255, 255, 255, 0.8);
    fill: none;
    transition: transform 0.15s ease, opacity 0.15s ease;
}

.marketplace-course-favorite-small:hover svg {
    stroke: var(--color-brand-purple);
    fill: var(--color-brand-purple);
}

.marketplace-course-favorite-small.favorited svg {
    fill: var(--color-brand-purple);
    stroke: var(--color-brand-purple);
}

.program-progress {
    margin: auto 0 var(--space-3) 0;
    padding: 0;
    border-top: none;
}

.progress-label {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 6px;
    font-size: 12px;
    color: #888;
    font-weight: 400;
}

.progress-bar {
    width: 100%;
    height: 2px;
    background: #2a2a2a;
    border-radius: 0;
    overflow: hidden;
    position: relative;
    margin: 0;
    padding: 0;
}

/* Light mode: keep progress bar gray, not black */
body.light-mode .progress-bar {
    background: #e5e5e5;
}

.progress-fill {
    height: 100%;
    background: #8B5CF6;
    border-radius: 0;
    transition: width 0.3s ease;
    position: absolute;
    top: 0;
    left: 0;
}

.progress-fill.animate {
    animation: progressFillGrow 1.2s ease-out forwards;
    width: 0 !important;
}

/* Continue Learning card in overview - compact horizontal layout */
#continueCourse .program-card {
    flex-direction: row;
    gap: 24px;
    max-width: 100%;
    background: none;
    border: none;
    padding: 0;
}

#continueCourse .program-thumbnail {
    width: 220px;
    min-width: 220px;
    max-width: 220px;
    aspect-ratio: 16 / 9;
    height: auto;
    border-radius: 0;
    overflow: hidden;
    margin-bottom: 0;
}

#continueCourse .program-content {
    padding: 0;
    gap: var(--space-2);
    flex: 1;
    justify-content: center;
}

#continueCourse .program-actions {
    margin-top: 12px;
    padding-top: 0;
    border-top: none;
}

/* Button styling for continue learning card */
#continueCourse .btn,
#continueCourse .btn-primary {
    margin-top: 0;
    width: auto;
    min-width: 110px;
    padding: 9px 20px;
    font-size: 13px;
    font-weight: 500;
    align-self: flex-start;
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
    border: none;
    border-radius: 6px;
    transition: background 0.15s ease;
    text-decoration: none;
}

#continueCourse .btn::before,
#continueCourse .btn-primary::before,
#continueCourse .program-card .btn-primary::before {
    display: none !important;
}

#continueCourse .btn:hover,
#continueCourse .btn-primary:hover {
    background: var(--color-bg-tertiary);
}

/* Light mode continue course button */
body.light-mode #continueCourse .btn,
body.light-mode #continueCourse .btn-primary {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-light);
}

body.light-mode #continueCourse .btn:hover,
body.light-mode #continueCourse .btn-primary:hover {
    background: var(--color-bg-tertiary);
    border-color: var(--color-border-medium);
}

/* Program actions container */
.program-actions {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-top: 0;
    flex-shrink: 0;
    padding-top: 0;
    border-top: none;
}

/* Subtle button styling for program cards */
.program-card .btn-primary {
    background: #1a1a1a;
    color: #fff;
    border: none;
    border-radius: 4px;
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 500;
    transition: background 0.2s ease;
    text-decoration: none;
    flex: 1;
    text-align: center;
}

.program-card .btn-primary:hover {
    background: #222;
}

/* Light mode button styling */
body.light-mode .program-card .btn-primary {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
    border: 1px solid var(--color-border-light);
}

body.light-mode .program-card .btn-primary:hover {
    background: var(--color-bg-tertiary);
    border-color: var(--color-border-medium);
}

.program-card .btn-secondary {
    background: none;
    color: #888;
    border: none;
    border-radius: 4px;
    padding: 8px 16px;
    font-size: 13px;
    font-weight: 500;
    transition: color 0.2s ease;
    text-decoration: none;
}

.program-card .btn-secondary:hover {
    color: #fff;
}

/* Light mode secondary button */
body.light-mode .program-card .btn-secondary {
    color: var(--color-text-tertiary);
}

body.light-mode .program-card .btn-secondary:hover {
    color: var(--color-text-primary);
}

/* Icon-only button */
.btn-icon-only {
    padding: var(--space-2);
    min-width: 36px;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-bg-secondary);
    color: var(--color-text-secondary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    transition: transform 0.15s ease, box-shadow 0.15s ease, opacity 0.15s ease;
    flex-shrink: 0; /* Prevent button from being squeezed */
}

.btn-icon-only:hover {
    background: var(--color-bg-tertiary);
    color: var(--color-text-primary);
    border-color: var(--color-border-medium);
    transform: translateY(-1px);
}

.btn-icon-only svg {
    width: 18px;
    height: 18px;
    stroke: currentColor;
}

@keyframes progressFillGrow {
    to {
        width: var(--progress-width, 0%) !important;
    }
}

/* ==========================================
   TABLES
   ========================================== */
.table-container {
    border: none;
    border-radius: 0;
    overflow: visible;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
}

.data-table th {
    text-align: left;
    padding: var(--space-3) var(--space-4);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-tertiary);
    background: transparent;
    border-bottom: 1px solid var(--color-border-light);
}

.data-table td {
    padding: var(--space-4);
    font-size: var(--font-size-sm);
    color: var(--color-text-primary);
    border-bottom: 1px solid var(--color-border-light);
}

.data-table tr:last-child td {
    border-bottom: none;
}

.data-table tr:hover {
    background: transparent;
}

/* ==========================================
   FORMS & INPUTS
   ========================================== */
.form-group {
    margin-bottom: var(--space-5);
}

.form-label {
    display: block;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
    margin-bottom: var(--space-2);
}

.form-input,
.form-select,
.form-textarea {
    width: 100%;
    padding: var(--space-2) var(--space-3);
    font-family: var(--font-family);
    font-size: var(--font-size-sm);
    color: var(--color-text-primary);
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    transition: border-color 0.15s ease;
}

.form-input:focus,
.form-select:focus,
.form-textarea:focus {
    outline: none;
    border-color: var(--color-border-medium);
}

.form-input[readonly] {
    background: var(--color-bg-secondary);
    color: var(--color-text-secondary);
    cursor: not-allowed;
}

/* ==========================================
   SETTINGS
   ========================================== */
.settings-item {
    padding: var(--space-5) 0;
    border-bottom: 1px solid var(--color-border-light);
}

.settings-item:last-child {
    border-bottom: none;
}

.settings-item-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-4);
}

.settings-item-label {
    flex: 1;
    min-width: 0;
}

.settings-item-title {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
    margin-bottom: var(--space-1);
}

.settings-item-description {
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
    line-height: 1.4;
}

/* YouTube-style Toggle Switch */
.toggle-switch {
    position: relative;
    display: inline-block;
    width: 44px;
    height: 24px;
    flex-shrink: 0;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: var(--color-border-medium);
    transition: transform 0.2s ease, background-color 0s, color 0s, border-color 0s, fill 0s, stroke 0s;
    border-radius: 24px;
}

.toggle-slider:before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 3px;
    bottom: 3px;
    background-color: white;
    transition: transform 0.2s ease, background-color 0s, color 0s, border-color 0s, fill 0s, stroke 0s;
    border-radius: 50%;
}

.toggle-switch input:checked + .toggle-slider {
    background-color: var(--color-brand-purple);
}

.toggle-switch input:checked + .toggle-slider:before {
    transform: translateX(20px);
}

.toggle-switch input:focus + .toggle-slider {
    outline: 2px solid var(--color-brand-purple);
    outline-offset: 2px;
}

.toggle-switch input:disabled + .toggle-slider {
    opacity: 0.5;
    cursor: not-allowed;
}

.form-textarea {
    resize: vertical;
    min-height: 100px;
}

/* Profile section form fields - fixed width */
#profile .form-input,
#profile .form-textarea,
#profile .form-select {
    max-width: 500px;
}

/* Hide old right sidebar navigation - we now use horizontal tabs */
.profile-right-panel {
    display: none !important;
}

/* ==========================================
   PROFILE TABS NAVIGATION
   ========================================== */
.profile-tabs {
    display: flex;
    gap: var(--space-6);
    border-bottom: 1px solid var(--color-border-light);
    margin-bottom: var(--space-8);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    position: relative;
}

.profile-tabs::-webkit-scrollbar {
    display: none;
}

.profile-tab {
    background: none;
    border: none;
    padding: var(--space-3) 0;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-tertiary);
    cursor: pointer;
    transition: color 0.2s ease;
    white-space: nowrap;
    position: relative;
}

.profile-tab:hover {
    color: var(--color-text-secondary);
}

.profile-tab.active {
    color: var(--color-text-primary);
}

.profile-tab-indicator {
    position: absolute;
    bottom: -1px;
    left: 0;
    top: auto;
    height: 2px;
    background: var(--color-brand-purple);
    border-radius: 0;
    transition: left 0.3s ease, width 0.3s ease;
    transform-origin: left;
    z-index: 2;
    margin: 0;
    padding: 0;
}

/* ==========================================
   PAYMENT NAVIGATION - COMPLETELY SEPARATE SYSTEM
   ========================================== */
.payment-nav-container {
    display: flex;
    gap: var(--space-6);
    border-bottom: 1px solid var(--color-border-light);
    margin-bottom: var(--space-8);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    position: relative;
}

.payment-nav-container::-webkit-scrollbar {
    display: none;
}

.payment-nav-btn {
    background: none;
    border: none;
    padding: var(--space-3) 0;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-tertiary);
    cursor: pointer;
    transition: color 0.2s ease;
    white-space: nowrap;
    position: relative;
}

.payment-nav-btn:hover {
    color: var(--color-text-secondary);
}

.payment-nav-btn.payment-nav-active {
    color: var(--color-text-primary);
}

.payment-nav-underline {
    position: absolute;
    bottom: -1px;
    left: 0;
    height: 2px;
    background: var(--color-brand-purple);
    border-radius: 0;
    transition: left 0.3s ease, width 0.3s ease;
    z-index: 2;
}

/* Light mode: underline stays purple (not affected by light mode) */

/* ==========================================
   PROGRESS NAVIGATION
   ========================================== */
.progress-nav-container {
    display: flex;
    gap: var(--space-6);
    border-bottom: 1px solid var(--color-border-light);
    margin-bottom: var(--space-8);
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
    position: relative;
}

.progress-nav-container::-webkit-scrollbar {
    display: none;
}

.progress-nav-btn {
    background: none;
    border: none;
    padding: var(--space-3) 0;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-tertiary);
    cursor: pointer;
    transition: color 0.2s ease;
    white-space: nowrap;
    position: relative;
}

.progress-nav-btn:hover {
    color: var(--color-text-secondary);
}

.progress-nav-btn.progress-nav-active {
    color: var(--color-text-primary);
}

.progress-nav-underline {
    position: absolute;
    bottom: -1px;
    left: 0;
    height: 2px;
    background: var(--color-brand-purple);
    border-radius: 0;
    transition: left 0.3s ease, width 0.3s ease;
    z-index: 2;
}

/* Light mode: underline stays purple (not affected by light mode) */

/* Custom Dropdown - Minimal */
.custom-dropdown-container {
    display: flex;
    align-items: center;
    gap: var(--space-3);
}

.custom-dropdown {
    position: relative;
    min-width: 280px;
}

.custom-dropdown-selected {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    padding: var(--space-2) 0;
    background: transparent;
    border: none;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    cursor: pointer;
    color: var(--color-text-primary);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    transition: all 0.2s ease;
}

/* Light mode: keep border gray, not black */
body.light-mode .custom-dropdown-selected {
    border-bottom-color: var(--color-border-light);
}

.custom-dropdown-selected:hover {
    border-bottom-color: rgba(255, 255, 255, 0.2);
}

/* Light mode: keep hover border gray */
body.light-mode .custom-dropdown-selected:hover {
    border-bottom-color: var(--color-border-medium);
}

.custom-dropdown-selected svg {
    transition: transform 0.2s ease;
    opacity: 0.5;
    flex-shrink: 0;
}

.custom-dropdown.open .custom-dropdown-selected svg {
    transform: rotate(180deg);
}

.custom-dropdown-options {
    position: absolute;
    top: calc(100% + var(--space-2));
    left: 0;
    right: 0;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    max-height: 280px;
    overflow-y: auto;
    opacity: 0;
    visibility: hidden;
    transform: translateY(-8px);
    transition: all 0.2s ease;
    z-index: 100;
    padding: var(--space-2) 0;
}

.custom-dropdown.open .custom-dropdown-options {
    opacity: 1;
    visibility: visible;
    transform: translateY(0);
}

.custom-dropdown-option {
    padding: var(--space-3) var(--space-4);
    cursor: pointer;
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    transition: background-color 0.15s ease;
    background: transparent;
}

.custom-dropdown-option:hover {
    background: var(--color-bg-tertiary);
}

.custom-dropdown-option.selected {
    color: var(--color-text-primary);
    font-weight: var(--font-weight-semibold);
}

/* ==========================================
   PROFILE INFORMATION DISPLAY/EDIT
   ========================================== */
.profile-info-container {
    display: flex;
    gap: var(--space-10);
    align-items: flex-start;
    position: relative;
}

.profile-info-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: 0;
}

.profile-field {
    display: flex;
    flex-direction: column;
    gap: var(--space-3);
    padding: var(--space-6) 0;
    position: relative;
    border-bottom: 1px solid var(--color-border-light);
}

.profile-field:last-child {
    border-bottom: none;
}

.profile-field-bio {
    align-items: stretch;
}

.profile-field-bio .profile-field-value {
    width: 100%;
}

.profile-field-bio .profile-field-textarea {
    width: 100%;
    box-sizing: border-box;
}

.profile-field-label {
    font-size: 11px;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
    margin-bottom: var(--space-2);
}

.profile-field-value {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    min-width: 0;
    position: relative;
}

.profile-field-toggle {
    display: flex;
    align-items: center;
    margin-top: var(--space-2);
    flex-shrink: 0;
}

/* Settings Section Styling */
.settings-section {
    margin-bottom: var(--space-8);
}

.settings-section-title {
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--color-text-tertiary);
    margin-bottom: var(--space-4);
    margin-top: 0;
}

#settings .profile-info-container {
    margin-bottom: 0;
}

.profile-field-value > span {
    color: var(--color-text-primary);
    font-size: 14px;
    line-height: 1.6;
    font-weight: var(--font-weight-normal);
}

.profile-field-value > span:empty::before {
    content: '';
    color: var(--color-text-tertiary);
    opacity: 0.5;
}

.profile-field-inputs {
    display: flex;
    gap: var(--space-4);
}

.profile-field-input,
.profile-field-textarea {
    width: 100%;
    padding: 8px 0;
    font-family: var(--font-family);
    font-size: 14px;
    color: var(--color-text-primary);
    background: transparent;
    border: none;
    border-bottom: 1px solid var(--color-border-light);
    border-radius: 0;
    transition: border-color 0.15s ease;
    line-height: 1.5;
}

body.light-mode .profile-field-input,
body.light-mode .profile-field-textarea {
    border-bottom-color: rgba(0, 0, 0, 0.1);
}

body.dark-mode .profile-field-input,
body.dark-mode .profile-field-textarea {
    border-bottom-color: rgba(255, 255, 255, 0.1);
}

.profile-field-input:hover,
.profile-field-textarea:hover {
    border-bottom-color: var(--color-text-tertiary);
}

body.light-mode .profile-field-input:hover,
body.light-mode .profile-field-textarea:hover {
    border-bottom-color: rgba(0, 0, 0, 0.2);
}

/* Light mode adjustments for settings */
body.light-mode .settings-section-title {
    color: #666;
}

/* Empty State Link Styling */
.empty-state-link {
    display: inline-block;
    padding: 0;
    font-size: 14px;
    font-weight: 500;
    color: var(--color-text-primary);
    text-decoration: none;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color 0.15s ease;
}

.empty-state-link:hover {
    color: var(--color-text-secondary);
}

.empty-state-link:active {
    opacity: 0.7;
}

.marketplace-explore-link {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 0;
    font-size: var(--font-size-sm);
    font-weight: 500;
    color: var(--color-text-tertiary);
    text-decoration: none;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color 0.2s ease;
}

.marketplace-explore-link .chevron-icon {
    width: 16px;
    height: 16px;
    transition: transform 0.2s ease;
    flex-shrink: 0;
}

.marketplace-explore-link:hover {
    color: #ffffff;
}

.marketplace-explore-link:hover .chevron-icon {
    transform: translateX(4px);
}

.marketplace-explore-link:active {
    opacity: 0.8;
}

body.dark-mode .marketplace-explore-link {
    color: var(--color-text-tertiary);
}

body.dark-mode .marketplace-explore-link:hover {
    color: #ffffff;
}

body.dark-mode .profile-field-input:hover,
body.dark-mode .profile-field-textarea:hover {
    border-bottom-color: rgba(255, 255, 255, 0.2);
}

.profile-field-input:focus,
.profile-field-textarea:focus {
    outline: none;
    border-bottom-color: var(--color-brand-purple);
    background: transparent;
}

.profile-field-input::placeholder,
.profile-field-textarea::placeholder {
    color: var(--color-text-tertiary);
    opacity: 0.5;
}

.profile-field-input[readonly] {
    background: var(--color-bg-secondary);
    color: var(--color-text-secondary);
    cursor: not-allowed;
    opacity: 0.6;
}

.profile-field-textarea {
    resize: vertical;
    min-height: 180px;
    max-height: 500px;
    font-family: var(--font-family);
    line-height: 1.6;
    padding-top: 12px;
}

#bio {
    min-height: 200px;
}

#learningGoals {
    min-height: 180px;
}

.profile-field-textarea::-webkit-scrollbar {
    width: 6px;
}

.profile-field-textarea::-webkit-scrollbar-track {
    background: transparent;
}

.profile-field-textarea::-webkit-scrollbar-thumb {
    background: var(--color-border-light);
    border-radius: 3px;
}

.profile-field-textarea::-webkit-scrollbar-thumb:hover {
    background: var(--color-border-medium);
}

/* Social Logos */
.profile-social-logos {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-3);
    align-items: center;
}

.social-logo-link {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    border-radius: 8px;
    transition: all 0.2s ease;
    text-decoration: none;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-light);
}

.social-logo-link:hover {
    background: var(--color-bg-tertiary);
    border-color: var(--color-border-medium);
}

.social-logo-img {
    width: 24px;
    height: 24px;
    object-fit: contain;
    display: block;
}

.profile-change-password-btn {
    padding: 0;
    font-size: 13px;
    font-weight: 500;
    color: var(--color-text-secondary);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.15s ease;
    display: block;
    text-align: left;
    margin-top: 8px;
}

.profile-change-password-btn:hover {
    color: var(--color-text-primary);
}

.profile-change-password-btn:active {
    opacity: 0.7;
}

.profile-set-password-btn {
    padding: 0;
    font-size: 13px;
    font-weight: 500;
    color: #888;
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color 0.15s ease;
    display: inline-block;
    text-align: left;
}

.profile-set-password-btn:hover {
    color: var(--color-text-primary);
}

.profile-set-password-btn:active {
    opacity: 0.7;
}

.password-alert-badge,
.nav-alert-badge {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 16px;
    height: 16px;
    background: #dc2626;
    color: white;
    border-radius: 50%;
    font-size: 11px;
    font-weight: 600;
    flex-shrink: 0;
}

.nav-alert-badge {
    margin-left: auto;
    width: 14px;
    height: 14px;
    font-size: 10px;
}

/* Hide alert badge when sidebar is collapsed */
.dashboard-sidebar.collapsed .nav-alert-badge {
    display: none !important;
}

/* Ensure nav-link can accommodate the badge */
.nav-link {
    width: 100%;
}

.profile-save-password-btn,
.profile-cancel-password-btn {
    padding: 0;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    border: none;
    background: transparent;
}

.profile-save-password-btn {
    color: var(--color-text-primary);
}

.profile-save-password-btn:hover {
    color: var(--color-text-secondary);
}

.profile-save-password-btn:active {
    opacity: 0.7;
}

.profile-cancel-password-btn {
    color: var(--color-text-tertiary);
}

.profile-cancel-password-btn:hover {
    color: var(--color-text-secondary);
}

.profile-cancel-password-btn:active {
    opacity: 0.7;
}

/* Light mode adjustments for password setup */
body.light-mode .profile-set-password-btn {
    color: #666;
}

body.light-mode .profile-set-password-btn:hover {
    color: var(--color-text-primary);
}

body.light-mode .profile-save-password-btn {
    color: var(--color-text-primary);
}

body.light-mode .profile-save-password-btn:hover {
    color: var(--color-text-secondary);
}

body.light-mode .profile-cancel-password-btn {
    color: #888;
}

body.light-mode .profile-cancel-password-btn:hover {
    color: var(--color-text-secondary);
}

/* Minimal password form styling */
.set-password-form-minimal {
    margin-top: 16px;
}

.password-form-field {
    margin-bottom: 16px;
}

.password-form-field label {
    display: block;
    margin-bottom: 8px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    color: var(--color-text-tertiary);
}

.password-form-field .profile-field-input {
    width: 100%;
    padding: 8px 0;
    border: none;
    border-bottom: 1px solid var(--color-border-light);
    border-radius: 0;
    background: transparent;
    color: var(--color-text-primary);
    font-size: 14px;
    transition: border-color 0.15s ease;
}

.password-form-field .profile-field-input:focus {
    outline: none;
    border-bottom-color: var(--color-text-secondary);
}

.password-form-field .profile-field-input::placeholder {
    color: var(--color-text-tertiary);
    opacity: 0.6;
}

.password-message-minimal {
    margin-top: 12px;
    padding: 8px 0;
    font-size: 13px;
    line-height: 1.4;
}

.password-message-minimal.error {
    color: #dc2626;
}

.password-message-minimal.success {
    color: #22c55e;
}

/* Light mode adjustments */
body.light-mode .password-form-field label {
    color: #666;
}

body.light-mode .password-form-field .profile-field-input {
    border-bottom-color: rgba(0, 0, 0, 0.1);
}

body.light-mode .password-form-field .profile-field-input:focus {
    border-bottom-color: rgba(0, 0, 0, 0.3);
}

.profile-edit-controls {
    position: sticky;
    top: var(--space-4);
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 8px;
    padding-top: var(--space-2);
}

.btn-edit-profile {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 8px;
    color: var(--color-text-secondary);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s ease;
}

.btn-edit-profile:hover {
    color: white;
    background: transparent;
}

body.dark-mode .btn-edit-profile:hover {
    background: transparent;
    color: white;
}

.btn-edit-profile:active {
    opacity: 0.6;
}

.btn-edit-profile svg {
    width: 15px;
    height: 15px;
    flex-shrink: 0;
    color: currentColor;
    stroke: currentColor;
    opacity: 0.7;
    transition: color 0.15s ease, stroke 0.15s ease;
}

.btn-edit-profile:hover svg {
    opacity: 1;
    color: white;
    stroke: white;
}

.profile-edit-actions {
    display: flex;
    gap: 16px;
    align-items: center;
}

.btn-text-cancel {
    padding: 0;
    font-size: 13px;
    font-weight: 500;
    color: var(--color-text-tertiary);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: all 0.15s ease;
}

.btn-text-cancel:hover {
    color: var(--color-text-secondary);
}

.btn-text-cancel:active {
    opacity: 0.5;
}

.profile-edit-actions .btn-primary {
    padding: 0;
    font-size: 13px;
    font-weight: 500;
    background: transparent !important;
    border: none !important;
    color: var(--color-text-primary) !important;
    cursor: pointer;
    transition: opacity 0.15s ease;
}

.profile-edit-actions .btn-primary:hover {
    background: transparent !important;
    color: var(--color-text-primary) !important;
}

.add-social-btn {
    padding: 8px 0;
    font-size: 13px;
    font-weight: 500;
    color: var(--color-text-tertiary);
    background: transparent;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s ease;
    text-align: left;
    margin-top: 4px;
    align-self: flex-start;
    width: auto;
}

.add-social-btn:hover {
    color: var(--color-text-primary);
}

.add-social-btn:active {
    opacity: 0.7;
}

.add-social-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
}

.dynamic-social-link-row {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.dynamic-social-link-row .profile-field-input {
    flex: 1;
}

.remove-social-btn {
    padding: 6px 10px;
    font-size: 12px;
    color: var(--color-text-tertiary);
    background: transparent;
    border: 1px solid var(--color-border);
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.15s ease;
    flex-shrink: 0;
}

.remove-social-btn:hover {
    color: var(--color-text-secondary);
    border-color: var(--color-border-hover);
}

.profile-edit-actions .btn-primary:active {
    background: transparent !important;
    color: var(--color-text-primary) !important;
    opacity: 0.5;
}

.preferences-toggles {
    display: flex;
    flex-direction: column;
    gap: var(--space-5);
    align-items: flex-end;
    padding-top: var(--space-2);
}

.preferences-toggles .toggle-switch {
    margin: 0;
}

.preference-toggle-item {
    height: 40px;
    display: flex;
    align-items: center;
}

@media (max-width: 768px) {
    /* Hide profile right panel on mobile */
    .profile-right-panel {
        display: none !important;
    }
    
    /* Profile section full width */
    #profile {
        width: 100%;
        max-width: 100%;
        overflow: visible;
    }
    
    #profile .card {
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: var(--space-4);
    }
    
    /* Profile header section - keep horizontal layout on mobile */
    .profile-header-section {
        flex-direction: row;
        align-items: center;
        gap: var(--space-4);
        padding: var(--space-4) 0;
        margin-bottom: var(--space-6);
    }
    
    .profile-picture-wrapper {
        flex-shrink: 0;
    }
    
    .profile-picture {
        width: 72px;
        height: 72px;
    }
    
    .profile-info {
        flex: 1;
        min-width: 0;
    }
    
    .profile-name {
        font-size: var(--font-size-lg);
    }
    
    .profile-meta {
        font-size: var(--font-size-xs);
    }
    
    .profile-info-container {
        flex-direction: column;
        gap: var(--space-4);
        width: 100%;
        max-width: 100%;
        overflow: visible;
    }
    
    .profile-info-content {
        width: 100%;
        max-width: 100%;
        overflow: visible;
    }
    
    .profile-edit-controls {
        position: static;
        flex-direction: row;
        justify-content: flex-end;
        width: 100%;
        margin-top: var(--space-4);
    }
    
    /* Profile fields - stacked layout with breathing room */
    .profile-field {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        justify-content: flex-start;
        gap: var(--space-3);
        width: 100%;
        max-width: 100%;
        overflow: visible;
        padding: var(--space-5) 0;
    }
    
    .profile-field > .profile-field-toggle {
        margin-top: var(--space-2);
        margin-left: 0;
        order: initial;
        width: 100%;
        display: flex;
        justify-content: flex-start;
    }
    
    .profile-field-label {
        width: 100%;
        margin-bottom: 0;
    }
    
    .profile-field-value {
        width: 100%;
        flex: initial;
        min-width: 0;
        text-align: left;
        gap: var(--space-2);
    }
    
    .profile-field-value > span {
        font-size: var(--font-size-base);
        line-height: 1.6;
    }
    
    .profile-field-toggle {
        width: 100%;
    }
    
    .profile-field-toggle .toggle-switch {
        margin-left: 0;
    }
    
    /* Settings cards gain more padding on mobile */
    .settings-section {
        padding: 0;
        border: none;
        background: transparent;
        margin-bottom: var(--space-5);
    }
    
    .settings-section:last-child {
        margin-bottom: 0;
    }
    
    .settings-section-title {
        margin-bottom: var(--space-3);
    }
    
    .profile-tabs {
        gap: var(--space-2);
        margin-bottom: var(--space-4);
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
        width: 100%;
    }
    
    .profile-tab {
        font-size: var(--font-size-xs);
        padding: var(--space-2) var(--space-3);
        white-space: nowrap;
        flex-shrink: 0;
    }
    
    /* Profile subsections - only show active ones */
    .profile-subsection {
        width: 100%;
        max-width: 100%;
        overflow: visible;
    }
    
    /* Only display active subsections */
    .profile-subsection:not(.active) {
        display: none !important;
    }
    
    .profile-subsection.active {
        display: block !important;
    }
    
    /* Ensure no content is cut off */
    .profile-info-container,
    .profile-info-content,
    .profile-field,
    .profile-field-value {
        min-width: 0;
        box-sizing: border-box;
    }
}

/* ==========================================
   PROGRESS CHART
   ========================================== */
.progress-chart-container {
    padding: var(--space-8) var(--space-6) var(--space-8) 0;
    overflow-x: auto;
    margin: 0 calc(-1 * var(--space-6)) 0 calc(-1 * var(--space-8));
    width: calc(100% + var(--space-6) + var(--space-8));
    padding-left: 0;
}

.progress-chart {
    width: 100%;
    min-height: 320px;
    display: block;
    position: relative;
}

.progress-chart-svg {
    width: 100%;
    max-width: 100%;
    height: auto;
    min-height: 320px;
    display: block;
}

.chart-bar {
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    filter: drop-shadow(0 2px 4px rgba(124, 58, 237, 0.15));
}

.chart-bar.animate {
    animation: chartBarGrow 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.chart-bar:hover {
    opacity: 1 !important;
    transform: translateY(-2px);
    filter: drop-shadow(0 4px 8px rgba(124, 58, 237, 0.25));
    fill: white;
}

@keyframes chartBarGrow {
    from {
        opacity: 0;
        transform: scaleY(0);
        transform-origin: bottom;
    }
    to {
        opacity: 0.7;
        transform: scaleY(1);
    }
}

.chart-area {
    transition: opacity 0.3s ease;
}

.chart-line {
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    animation: chartLineDraw 1.2s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    filter: drop-shadow(0 2px 4px rgba(124, 58, 237, 0.2));
}

@keyframes chartLineDraw {
    to {
        stroke-dashoffset: 0;
    }
}

.chart-point {
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    opacity: 1;
}

.chart-point.animate {
    animation: chartPointAppear 0.5s cubic-bezier(0.4, 0, 0.2, 1) forwards;
    opacity: 0;
}

.chart-point.animate:nth-child(1) { animation-delay: 0.8s; }
.chart-point.animate:nth-child(2) { animation-delay: 0.9s; }
.chart-point.animate:nth-child(3) { animation-delay: 1.0s; }
.chart-point.animate:nth-child(4) { animation-delay: 1.1s; }
.chart-point.animate:nth-child(5) { animation-delay: 1.2s; }
.chart-point.animate:nth-child(6) { animation-delay: 1.3s; }
.chart-point.animate:nth-child(7) { animation-delay: 1.4s; }

@keyframes chartPointAppear {
    from {
        opacity: 0;
        transform: scale(0);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

.chart-point:hover {
    r: 6;
    filter: drop-shadow(0 2px 6px rgba(124, 58, 237, 0.4));
}

.chart-period-btn {
    padding: 0;
    background: transparent;
    border: none;
    border-radius: 0;
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    font-family: var(--font-family);
    cursor: pointer;
    white-space: nowrap;
    transition: color 0.15s ease;
    position: relative;
}

.chart-period-btn:hover {
    background: transparent;
    color: var(--color-text-primary);
}

.chart-period-btn.active {
    background: transparent;
    color: white;
    border: none;
}

body.light-mode .chart-period-btn.active {
    color: var(--color-text-primary);
}

.chart-type-btn {
    padding: var(--space-1) var(--space-2);
    transition: color 0.15s ease, background 0.15s ease;
}

.chart-type-btn:hover {
    background: transparent !important;
    color: white !important;
}

.chart-type-btn:hover svg {
    color: white !important;
    stroke: white !important;
}

/* Chart improvements for better readability */
.progress-chart-svg text {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
    letter-spacing: -0.01em;
}

.progress-chart-svg .chart-bars {
    transition: opacity 0.3s ease;
}

/* ==========================================
   PROGRESS SECTION REDESIGN
   ========================================== */

/* Progress Stats */

/* Remove glows and shadows from chart elements */
.chart-bar {
    filter: none;
    transition: opacity 0.2s ease;
}

.chart-bar:hover {
    opacity: 0.9;
    transform: none;
    filter: none;
}

.chart-line {
    filter: none;
}

.chart-point {
    filter: none;
}

.chart-point:hover {
    filter: none;
}

/* ==========================================
   PROFILE PICTURE
   ========================================== */
.profile-header-section {
    display: flex;
    align-items: center;
    gap: var(--space-6);
    margin-bottom: var(--space-4);
    padding: var(--space-4) 0;
    border-bottom: none;
}

.profile-picture-wrapper {
    position: relative;
    display: inline-block;
    cursor: pointer;
    flex-shrink: 0;
    pointer-events: all;
    user-select: none;
}

.profile-picture {
    width: 96px;
    height: 96px;
    border-radius: 50%;
    object-fit: cover;
    border: none;
    cursor: pointer;
    pointer-events: all;
    background: var(--color-bg-secondary);
    display: block;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.profile-info {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.profile-name {
    font-size: 24px;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin: 0;
    letter-spacing: -0.02em;
}

.profile-meta {
    display: flex;
    flex-direction: column;
    gap: 2px;
    font-size: var(--font-size-sm);
    color: var(--color-text-tertiary);
}

.profile-email {
    color: var(--color-text-tertiary);
}

.profile-member-since {
    color: var(--color-text-tertiary);
}

.profile-picture-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.2s ease;
    cursor: pointer;
    pointer-events: all;
    z-index: 2;
}

.profile-picture-overlay svg {
    width: 32px;
    height: 32px;
    stroke: white;
    opacity: 0.9;
}

.profile-picture-wrapper:hover .profile-picture-overlay {
    opacity: 1;
}

/* ==========================================
   PROFILE RIGHT NAVIGATION PANEL
   ========================================== */
.profile-right-panel {
    position: fixed;
    right: 0;
    top: 0;
    width: var(--sidebar-width);
    height: 100vh;
    background: var(--color-bg-primary);
    border-left: 1px solid var(--color-border-light);
    display: none;
    flex-direction: column;
    z-index: 90;
    transition: width 0.2s ease;
}

#profile.active ~ .profile-right-panel {
    display: flex;
}

/* Collapsed State */
.profile-right-panel.collapsed {
    width: 64px;
}

.profile-right-panel.collapsed .profile-nav-item span {
    opacity: 0;
    max-width: 0;
    overflow: hidden;
    margin: 0;
    padding: 0;
    width: 0;
    flex-shrink: 0;
}

.profile-right-panel.collapsed .profile-nav-item {
    justify-content: center;
    padding: var(--space-2) var(--space-4);
    align-items: center;
    gap: 0;
    position: relative;
    height: calc(16px + var(--space-2) * 2);
}

.profile-right-panel.collapsed .profile-nav-item svg {
    margin: 0;
    flex-shrink: 0;
    width: 16px;
    height: 16px;
    position: relative;
    flex: 0 0 16px;
}

.profile-right-panel.collapsed .profile-nav-item.active svg {
    opacity: 1;
}

.profile-right-panel.collapsed .profile-nav-item.active path,
.profile-right-panel.collapsed .profile-nav-item.active circle,
.profile-right-panel.collapsed .profile-nav-item.active line,
.profile-right-panel.collapsed .profile-nav-item.active polyline,
.profile-right-panel.collapsed .profile-nav-item.active rect {
    stroke: var(--color-brand-purple);
}

/* Collapse button rotation - when collapsed, arrow points left (<) */
.profile-right-panel.collapsed .profile-panel-collapse-btn svg {
    transform: rotate(180deg);
}

/* Tooltip for collapsed nav items */
.profile-right-panel.collapsed .profile-nav-item::after {
    content: attr(data-tooltip);
    position: absolute;
    right: calc(100% + 8px);
    background: var(--color-bg-elevated);
    color: var(--color-text-primary);
    padding: var(--space-1) var(--space-2);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-md);
    font-size: var(--font-size-xs);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    z-index: 1000;
    transition: opacity 0.15s ease;
    box-shadow: var(--shadow-md);
}

.profile-right-panel.collapsed .profile-nav-item:hover::after {
    opacity: 1;
}

.profile-right-panel-header {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    padding: var(--space-4);
    height: var(--header-height);
    border-bottom: 1px solid var(--color-border-light);
}

.profile-right-panel.collapsed .profile-right-panel-header {
    justify-content: center;
    padding: var(--space-4);
}

.profile-panel-title {
    flex: 1;
    min-width: 0;
    display: flex;
    align-items: center;
    justify-content: flex-start;
}

.profile-right-panel.collapsed .profile-panel-title {
    flex: 0;
    justify-content: center;
}

.profile-panel-title span {
    transition: opacity 0.15s ease;
}

.profile-right-panel.collapsed .profile-panel-title span {
    opacity: 0;
    width: 0;
    overflow: hidden;
    white-space: nowrap;
}

.profile-panel-collapse-btn {
    position: absolute;
    left: -14px;
    top: 50%;
    transform: translateY(-50%);
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-light);
    border-radius: 50%;
    color: var(--color-text-tertiary);
    cursor: pointer;
    padding: 0;
    transition: transform 0.15s ease, box-shadow 0.15s ease;
    z-index: 101;
    box-shadow: var(--shadow-sm);
}

.profile-right-panel.collapsed .profile-panel-collapse-btn {
    left: -14px;
    transform: translateY(-50%);
}

.profile-panel-collapse-btn:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
    border-color: var(--color-border-medium);
}

.profile-panel-collapse-btn svg {
    width: 14px;
    height: 14px;
    transition: transform 0.15s ease;
}

.profile-right-panel-nav {
    flex: 1;
    overflow-y: auto;
    padding: var(--space-4) 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.profile-panel-section {
    margin-bottom: var(--space-8);
    transition: margin-bottom 0.2s ease;
    position: relative;
}

.profile-right-panel.collapsed .profile-panel-section {
    margin-bottom: var(--space-8);
}

.profile-section-title {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-quaternary);
    padding: 0 var(--space-4);
    margin-bottom: var(--space-3);
    transition: opacity 0.2s ease, max-height 0.2s ease, margin 0.2s ease, padding 0.2s ease;
}

.profile-right-panel.collapsed .profile-section-title {
    opacity: 0;
    height: auto;
    margin-bottom: var(--space-3);
    padding: 0 var(--space-4);
    overflow: hidden;
    transition: opacity 0.2s ease;
    visibility: hidden;
}

.profile-nav-items {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.profile-nav-item {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    padding: var(--space-2) var(--space-4);
    margin: 0 var(--space-2);
    border-radius: var(--radius-md);
    color: var(--color-text-secondary);
    text-decoration: none;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    transition: all 0.15s ease;
    cursor: pointer;
    position: relative;
}

.profile-nav-item:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
}

.profile-nav-item:hover svg {
    opacity: 1;
}

.profile-nav-item.active {
    color: var(--color-brand-purple);
    background: transparent;
}

.profile-nav-item svg {
    flex-shrink: 0;
    width: 18px;
    height: 18px;
    opacity: 0.6;
    transition: opacity 0.2s ease;
    position: relative;
    display: block;
}

.profile-nav-item.active svg {
    opacity: 1;
    color: var(--color-brand-purple);
}

.profile-nav-item.active path,
.profile-nav-item.active circle,
.profile-nav-item.active line,
.profile-nav-item.active polyline,
.profile-nav-item.active rect {
    stroke: var(--color-brand-purple);
}

.profile-nav-item path,
.profile-nav-item circle,
.profile-nav-item line,
.profile-nav-item polyline,
.profile-nav-item rect {
    transition: stroke 0.2s ease;
}

.profile-nav-item span {
    transition: opacity 0.2s ease, max-width 0.2s ease, margin 0.2s ease;
    white-space: nowrap;
    overflow: hidden;
}

.profile-subsection {
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Show/hide right panel when on profile section */
#profile:not(.active) ~ .profile-right-panel {
    display: none;
}

/* ==========================================
   MARKETPLACE / LIBRARY
   ========================================== */
.marketplace-controls-wrapper {
    margin-bottom: 40px;
    width: 100%;
}

.search-container {
    display: flex;
    align-items: center;
    gap: 12px;
    margin-bottom: 0;
    width: 100%;
}

.marketplace-search-wrapper {
    position: relative;
    flex: 1;
    max-width: none;
}

.marketplace-search-icon {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    color: #666;
    pointer-events: none;
}

.marketplace-search-input {
    width: 100%;
    padding: 10px 12px 10px 28px;
    font-family: var(--font-family);
    font-size: 14px;
    color: var(--color-text-primary);
    background: transparent;
    border: none;
    border-bottom: 1px solid #333;
    border-radius: 0;
    transition: border-color 0.2s ease;
}

/* Light mode: keep search input border gray, not black */
body.light-mode .marketplace-search-input {
    border-bottom-color: var(--color-border-light);
}

.marketplace-search-input:focus {
    outline: none;
    border-bottom-color: #666;
}

/* Light mode: keep focus border gray */
body.light-mode .marketplace-search-input:focus {
    border-bottom-color: var(--color-border-medium);
}

.marketplace-search-input::placeholder {
    color: #666;
}

.filter-toggle-btn {
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 10px 0;
    background: none;
    border: none;
    color: #888;
    font-size: 13px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    white-space: nowrap;
}

.filter-toggle-btn:hover {
    color: #fff;
    border-bottom-color: transparent;
}

.filter-toggle-btn svg {
    width: 16px;
    height: 16px;
    opacity: 0.7;
    transition: opacity 0.2s ease;
}

.filter-toggle-btn:hover svg {
    opacity: 1;
}

/* Marketplace Search Dropdown */
.marketplace-search-dropdown {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    right: 0;
    background: #0a0a0a;
    border: 1px solid #222;
    border-radius: 4px;
    max-height: 320px;
    overflow-y: auto;
    z-index: 1000;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
}

.marketplace-search-suggestions {
    padding: 4px;
}

.marketplace-search-dropdown .suggestion-item {
    display: block;
    padding: 12px 16px;
    cursor: pointer;
    border-radius: 4px;
    transition: background 0.15s ease;
}

.marketplace-search-dropdown .suggestion-item:hover {
    background: rgba(255, 255, 255, 0.05);
}

.marketplace-search-dropdown .suggestion-item.active {
    background: rgba(255, 255, 255, 0.08);
}

/* Marketplace Filter Dropdown - Ultra Minimal */
.marketplace-filter-dropdown {
    margin-top: 32px;
    padding: 0;
    animation: filterDropdownSlide 0.2s ease;
    width: 100%;
    max-width: none;
    position: relative;
}

@keyframes filterDropdownSlide {
    from {
        opacity: 0;
        transform: translateY(-4px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.filter-row {
    margin-bottom: 32px;
}

.filter-row:last-of-type {
    margin-bottom: 24px;
}

.filter-group {
    display: flex;
    align-items: baseline;
    gap: 48px;
    width: 100%;
}

.filter-label {
    font-size: 13px;
    font-weight: 400;
    color: var(--color-text-tertiary);
    min-width: 100px;
    flex-shrink: 0;
}

.filter-options {
    display: flex;
    flex-wrap: wrap;
    gap: 48px;
    flex: 1;
    justify-content: flex-start;
    position: relative;
}

.filter-chip {
    padding: 0;
    font-size: 14px;
    font-weight: 400;
    color: var(--color-text-tertiary);
    background: transparent;
    border: none;
    cursor: pointer;
    transition: color 0.15s ease;
    white-space: nowrap;
    position: relative;
}

.filter-chip:hover {
    color: var(--color-text-secondary);
}

.filter-chip.active {
    color: var(--color-text-primary);
}

.filter-underline {
    position: absolute;
    bottom: -4px;
    height: 2px;
    background: #a476ff !important;
    transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    opacity: 0;
    display: block !important;
    visibility: visible !important;
    left: 0;
    width: 0;
    z-index: 1;
}

/* Show underline when there's an active chip in the container */
.filter-options:has(.filter-chip.active) .filter-underline {
    opacity: 1 !important;
}


.marketplace-search-dropdown .suggestion-text {
    font-size: 14px;
    color: #ccc;
    font-weight: 400;
}

.marketplace-search-dropdown .suggestion-text strong {
    color: #fff;
    font-weight: 500;
}

/* Filter Categories */
.filter-categories-wrapper {
    position: relative;
    margin-bottom: 24px;
    margin-top: 0;
    padding-bottom: 0;
    padding-top: 0;
}

.filter-categories-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 16px;
}

.filter-categories {
    display: flex;
    justify-content: flex-start;
    gap: 24px;
    overflow-x: auto;
    flex: 1;
}

.filter-categories::-webkit-scrollbar {
    display: none;
}


.filter-action-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    padding: 0;
    background: transparent;
    border: none;
    color: #666;
    cursor: pointer;
    border-radius: 0;
    transition: color 0.2s ease;
}

.filter-action-btn:hover {
    color: #fff;
    background: transparent;
}

.filter-action-btn svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
    transition: stroke 0.2s ease;
}

.filter-action-btn:hover svg {
    stroke: #fff;
}

.filter-category {
    padding: 8px 0;
    background: transparent;
    border: none;
    border-radius: 0;
    color: #666;
    font-size: 13px;
    font-weight: 400;
    cursor: pointer;
    white-space: nowrap;
    transition: color 0.2s ease;
    position: relative;
}

.filter-category:hover {
    background: transparent;
    color: #fff;
}

.filter-category.active {
    background: transparent;
    color: #fff;
    border: none;
    font-weight: 400;
}

body.light-mode .filter-category.active {
    color: var(--color-text-primary);
}

.filter-categories-line {
    display: none;
}

.filter-categories-indicator {
    display: none;
}

/* ==========================================
   MODALS & POPUPS
   ========================================== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.modal {
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-lg);
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.modal-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-5) var(--space-6);
    border-bottom: 1px solid var(--color-border-light);
}

.modal-title {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
}

.modal-close {
    background: none;
    border: none;
    color: var(--color-text-tertiary);
    cursor: pointer;
    padding: var(--space-2);
    line-height: 1;
}

.modal-close:hover {
    color: var(--color-text-primary);
}

.modal-body {
    padding: var(--space-6);
    overflow-y: auto;
}

.modal-footer {
    display: flex;
    align-items: center;
    justify-content: flex-end;
    gap: var(--space-3);
    padding: var(--space-5) var(--space-6);
    border-top: 1px solid var(--color-border-light);
}

/* ==========================================
   RESPONSIVE
   ========================================== */
@media (max-width: 1024px) {
    :root {
        --sidebar-width: 220px;
    }
    
    .dashboard-header {
        left: var(--sidebar-width);
    }
}

@media (max-width: 768px) {
    /* CRITICAL: Show section titles on mobile - must be first and most specific */
    .dashboard-sidebar .sidebar-section .sidebar-section-title,
    .dashboard-sidebar.collapsed .sidebar-section .sidebar-section-title,
    .dashboard-sidebar.open .sidebar-section .sidebar-section-title,
    .dashboard-sidebar.open.collapsed .sidebar-section .sidebar-section-title,
    nav.dashboard-sidebar .sidebar-section .sidebar-section-title,
    nav.dashboard-sidebar.collapsed .sidebar-section .sidebar-section-title {
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        height: auto !important;
        max-height: none !important;
        overflow: visible !important;
        padding: 0 var(--space-4) !important;
        margin-bottom: var(--space-3) !important;
        margin-top: var(--space-4) !important;
        font-size: var(--font-size-xs) !important;
        font-weight: var(--font-weight-semibold) !important;
        text-transform: uppercase !important;
        letter-spacing: 0.05em !important;
        color: var(--color-text-quaternary) !important;
    }
    
    .sidebar-section:first-of-type .sidebar-section-title {
        margin-top: 0 !important;
    }
    
    /* Full screen sidebar on mobile */
    .dashboard-sidebar {
        width: 100vw;
        max-width: 100vw;
        transform: translateX(-100%);
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
        z-index: 1000;
        box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);
        opacity: 0;
        will-change: transform, opacity;
    }
    
    .dashboard-sidebar.open {
        transform: translateX(0);
        opacity: 1;
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
    }
    
    /* Ensure smooth animation when closing */
    .dashboard-sidebar:not(.open) {
        transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.3s ease;
    }
    
    /* Sidebar overlay for mobile */
    .sidebar-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.5);
        z-index: 999;
        display: block;
    }
    
    .dashboard-main {
        margin-left: 0;
    }
    
    .dashboard-header {
        left: 0;
    }
    
    .sidebar-collapse-btn {
        display: none; /* Hide collapse button on mobile - use mobile menu instead */
    }
    
    /* Hide logo on mobile */
    .sidebar-header {
        display: none !important;
    }
    
    /* Mobile profile section at top of sidebar */
    .sidebar-mobile-profile {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: var(--space-8) var(--space-4) var(--space-6);
        margin-bottom: var(--space-4);
        cursor: pointer;
        transition: background 0.15s ease;
        width: 100%;
        position: relative;
    }
    
    .sidebar-mobile-profile:active {
        background: var(--color-bg-secondary);
    }
    
    /* Divider after profile section - gray divider */
    .sidebar-mobile-profile::after {
        content: '';
        position: absolute;
        bottom: 0;
        left: var(--space-4);
        right: var(--space-4);
        height: 1px;
        background: var(--color-border-light);
    }
    
    /* Close button - X button on left side */
    .sidebar-mobile-close-btn {
        position: fixed;
        top: calc(var(--header-height) / 2 - 12px - 2px);
        left: var(--space-6);
        background: none;
        border: none;
        color: var(--color-text-primary);
        cursor: pointer;
        padding: var(--space-2);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: color 0.15s ease;
        z-index: 1001;
    }
    
    .sidebar-mobile-close-btn:hover,
    .sidebar-mobile-close-btn:active {
        color: var(--color-text-secondary);
    }
    
    .sidebar-mobile-close-btn svg {
        width: 24px;
        height: 24px;
    }
    
    .sidebar-mobile-profile-picture {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        background: var(--color-bg-secondary);
        display: flex;
        align-items: center;
        justify-content: center;
        margin-bottom: var(--space-3);
        overflow: hidden;
        border: 2px solid var(--color-border-light);
        flex-shrink: 0;
    }
    
    .sidebar-mobile-profile-picture img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
    }
    
    .sidebar-mobile-profile-name {
        font-size: var(--font-size-xl);
        font-weight: var(--font-weight-semibold);
        color: var(--color-text-primary);
        text-align: center;
        word-break: break-word;
        max-width: 100%;
        margin-bottom: var(--space-1);
    }
    
    .sidebar-mobile-profile-email {
        font-size: var(--font-size-sm);
        color: var(--color-text-tertiary);
        text-align: center;
        word-break: break-word;
        max-width: 100%;
    }
    
    /* Keep section titles visible on mobile */
    .sidebar-section {
        border-top: none;
        margin-bottom: var(--space-6);
    }
    
    /* Force section titles to be visible on mobile - override ALL states with maximum specificity */
    .dashboard-sidebar .sidebar-section .sidebar-section-title,
    .dashboard-sidebar.collapsed .sidebar-section .sidebar-section-title,
    .dashboard-sidebar.open .sidebar-section .sidebar-section-title,
    .dashboard-sidebar.open.collapsed .sidebar-section .sidebar-section-title,
    .sidebar-section .sidebar-section-title,
    .sidebar-section-title {
        border-bottom: none !important;
        margin-bottom: var(--space-3) !important;
        display: block !important;
        visibility: visible !important;
        opacity: 1 !important;
        height: auto !important;
        max-height: none !important;
        padding: 0 var(--space-4) !important;
        margin-top: var(--space-4) !important;
        overflow: visible !important;
        font-size: var(--font-size-xs) !important;
        font-weight: var(--font-weight-semibold) !important;
        text-transform: uppercase !important;
        letter-spacing: 0.05em !important;
        color: var(--color-text-quaternary) !important;
    }
    
    /* Ensure first section title has proper spacing */
    .sidebar-section:first-of-type .sidebar-section-title {
        margin-top: 0 !important;
    }
    
    .mobile-menu-btn {
        display: flex;
        background: none;
        border: none;
        color: var(--color-text-primary);
        cursor: pointer;
        padding: var(--space-2);
    }
    
    .header-center {
        display: none;
    }
    
    /* Hide user profile and name from mobile navigation at the top */
    .user-profile-mini {
        display: none !important;
    }
    
    .header-left {
        display: flex !important;
        flex: 1;
        justify-content: flex-start;
        margin-left: var(--space-2);
    }
    
    .dashboard-title {
        font-size: var(--font-size-lg);
        text-align: left;
        width: 100%;
        display: inline-flex;
        justify-content: flex-start;
        gap: 4px;
    }
    
    /* Content centering handled in mobile optimization section below */
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .programs-grid {
        grid-template-columns: 1fr;
    }
}

/* Desktop: Ensure mobile elements are hidden */
@media (min-width: 769px) {
    .sidebar-mobile-profile {
        display: none !important;
    }
    
    .sidebar-mobile-close-btn {
        display: none !important;
    }
    
    .sidebar-mobile-profile-picture,
    .sidebar-mobile-profile-name,
    .sidebar-mobile-profile-email {
        display: none !important;
    }
    
    .sidebar-overlay {
        display: none !important;
    }
}

/* ==========================================
   UTILITY CLASSES
   ========================================== */
.text-center {
    text-align: center;
}

.mt-0 { margin-top: 0; }
.mt-2 { margin-top: var(--space-2); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }
.mt-8 { margin-top: var(--space-8); }

.mb-0 { margin-bottom: 0; }
.mb-2 { margin-bottom: var(--space-2); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }
.mb-8 { margin-bottom: var(--space-8); }

.hide {
    display: none !important;
}

.show {
    display: block !important;
}

/* ==========================================
   FOCUS STATES - Accessible & Clean
   ========================================== */
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
a:focus-visible {
    outline: 2px solid var(--color-brand-purple);
    outline-offset: 2px;
}

/* ==========================================
   SCROLLBAR - Hidden but functional
   ========================================== */
* {
    scrollbar-width: none; /* Firefox */
    -ms-overflow-style: none; /* IE and Edge */
}

*::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
    width: 0;
    height: 0;
    background: transparent;
}

*::-webkit-scrollbar-track {
    display: none;
    background: transparent;
}

*::-webkit-scrollbar-thumb {
    display: none;
    background: transparent;
}

*::-webkit-scrollbar-thumb:hover {
    display: none;
    background: transparent;
}

/* ==========================================
   SELECTION - Minimal Light Gray
   ========================================== */
::selection {
    background: var(--color-bg-tertiary);
    color: inherit;
}

::-moz-selection {
    background: var(--color-bg-tertiary);
    color: inherit;
}

/* Prevent image selection and dragging */
img {
    user-select: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    pointer-events: auto;
    -webkit-user-drag: none;
    -khtml-user-drag: none;
    -moz-user-drag: none;
    -o-user-drag: none;
    user-drag: none;
}

/* ==========================================
   LOADING STATES
   ========================================== */
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}

.loading {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

/* ==========================================
   EMPTY STATES
   ========================================== */
.empty-state {
        text-align: center;
    padding: var(--space-12) var(--space-6);
}

.empty-state svg {
    opacity: 0.3;
    margin: 0 auto var(--space-6);
}

.empty-state h3 {
    color: var(--color-text-secondary);
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    margin-bottom: var(--space-2);
}

.empty-state p {
    color: var(--color-text-tertiary);
    margin-bottom: var(--space-6);
}

/* ==========================================
   BADGES
   ========================================== */
.badge {
    display: inline-flex;
    align-items: center;
    padding: var(--space-1) var(--space-2);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    border-radius: var(--border-radius-sm);
    background: var(--color-bg-tertiary);
    color: var(--color-text-secondary);
}

.badge-primary {
    background: var(--color-brand-purple);
    color: var(--color-bg-primary);
}

.badge-success {
    background: #f0fdf4;
    color: #166534;
}

@media (prefers-color-scheme: dark) {
    .badge-success {
        background: #14532d;
        color: #86efac;
    }
}

/* ==========================================
   SMOOTH TRANSITIONS
   ========================================== */
.dashboard-sidebar,
.dashboard-main,
.content-section,
.nav-link {
        transition: color 0.15s ease, background 0.15s ease;
}

.btn,
.program-card,
.stat-card {
        transition: transform 0.15s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.15s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.15s cubic-bezier(0.4, 0, 0.2, 1), width 0.15s cubic-bezier(0.4, 0, 0.2, 1), height 0.15s cubic-bezier(0.4, 0, 0.2, 1), margin 0.15s cubic-bezier(0.4, 0, 0.2, 1), padding 0.15s cubic-bezier(0.4, 0, 0.2, 1);
}

/* ==========================================
   LOGOUT CONFIRMATION MODAL
   ========================================== */
.logout-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.25s cubic-bezier(0.4, 0, 0.2, 1), visibility 0.25s ease;
}

.logout-modal.active {
    opacity: 1;
    visibility: visible;
}

.logout-modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

body.dark-mode .logout-modal-overlay {
    background: rgba(0, 0, 0, 0.7);
}

.logout-modal-content {
    position: relative;
    background: var(--color-bg-elevated);
    border-radius: 16px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.15), 0 0 0 1px rgba(0, 0, 0, 0.05);
    width: 100%;
    max-width: 440px;
    margin: var(--space-4);
    border: 1px solid var(--color-border-light);
    transform: scale(0.96) translateY(10px);
    transition: transform 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
}

body.dark-mode .logout-modal-content {
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4), 0 0 0 1px rgba(255, 255, 255, 0.05);
}

.logout-modal.active .logout-modal-content {
    transform: scale(1) translateY(0);
}

.logout-modal-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 80px;
    height: 80px;
    margin: var(--space-8) auto var(--space-6);
    border-radius: 50%;
    background: linear-gradient(135deg, rgba(164, 118, 255, 0.15) 0%, rgba(164, 118, 255, 0.08) 100%);
    color: var(--color-brand-purple);
    border: 2px solid rgba(164, 118, 255, 0.2);
}

body.dark-mode .logout-modal-icon {
    background: linear-gradient(135deg, rgba(164, 118, 255, 0.2) 0%, rgba(164, 118, 255, 0.1) 100%);
    border-color: rgba(164, 118, 255, 0.3);
}

.logout-modal-icon svg {
    width: 32px;
    height: 32px;
    stroke: var(--color-brand-purple);
}

.logout-modal-header {
    padding: 0 var(--space-8) var(--space-4);
    text-align: center;
}

.logout-modal-title {
    font-size: 1.375rem;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin: 0;
    letter-spacing: -0.01em;
    line-height: 1.4;
}

.logout-modal-body {
    padding: 0 var(--space-8) var(--space-6);
    text-align: center;
}

.logout-modal-message {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    margin: 0;
    line-height: 1.6;
    max-width: 320px;
    margin-left: auto;
    margin-right: auto;
}

.logout-modal-actions {
    padding: var(--space-6) var(--space-8) var(--space-8);
    display: flex;
    gap: var(--space-3);
    justify-content: stretch;
    border-top: 1px solid var(--color-border-light);
    background: var(--color-bg-secondary);
}

body.dark-mode .logout-modal-actions {
    background: var(--color-bg-tertiary);
}

.logout-btn-cancel,
.logout-btn-confirm {
    flex: 1;
    padding: var(--space-3) var(--space-5);
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    border-radius: 8px;
    border: 1px solid transparent;
    cursor: pointer;
    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1), opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    font-family: var(--font-family);
    position: relative;
    overflow: hidden;
}

.logout-btn-cancel {
    background: var(--color-bg-primary);
    color: var(--color-text-primary);
    border-color: var(--color-border-medium);
}

.logout-btn-cancel:hover {
    background: var(--color-bg-secondary);
    border-color: var(--color-border-dark);
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

body.dark-mode .logout-btn-cancel:hover {
    background: var(--color-bg-tertiary);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.logout-btn-confirm {
    background: linear-gradient(135deg, var(--color-brand-purple) 0%, var(--color-brand-purple-dark) 100%);
    color: #ffffff;
    border-color: transparent;
    font-weight: var(--font-weight-semibold);
    box-shadow: 0 2px 8px rgba(164, 118, 255, 0.3);
}

.logout-btn-confirm:hover {
    background: linear-gradient(135deg, var(--color-brand-purple-dark) 0%, #7c3aed 100%);
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(164, 118, 255, 0.4);
}

.logout-btn-confirm:active {
    transform: translateY(0);
    box-shadow: 0 1px 4px rgba(164, 118, 255, 0.3);
}

.logout-btn-cancel:active {
    transform: translateY(0);
}

@media (max-width: 480px) {
    .logout-modal-content {
        max-width: calc(100% - 32px);
        margin: var(--space-4);
    }
    
    .logout-modal-icon {
        width: 64px;
        height: 64px;
        margin: var(--space-6) auto var(--space-5);
    }
    
    .logout-modal-icon svg {
        width: 28px;
        height: 28px;
    }
    
    .logout-modal-header,
    .logout-modal-body {
        padding-left: var(--space-6);
        padding-right: var(--space-6);
    }
    
    .logout-modal-actions {
        padding: var(--space-5) var(--space-6) var(--space-6);
        flex-direction: column;
    }
    
    .logout-btn-cancel,
    .logout-btn-confirm {
        width: 100%;
    }
}


/* ==========================================
   MARKETPLACE FILTER DRAWER
   Modern slide-out panel from right
   ========================================== */
.marketplace-filter-drawer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 10000;
    pointer-events: none;
}

.marketplace-filter-drawer.active {
    pointer-events: all;
}

.marketplace-filter-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
    opacity: 0;
    transition: opacity 0.25s ease;
    pointer-events: none;
}

.marketplace-filter-drawer.active .marketplace-filter-overlay {
    opacity: 1;
    pointer-events: all;
}

body.dark-mode .marketplace-filter-overlay {
    background: rgba(0, 0, 0, 0.6);
}

<<<<<<< Updated upstream
.marketplace-filter-panel {
    position: absolute;
    top: 0;
    right: 0;
    width: 100%;
    max-width: 360px;
    height: 100%;
    background: var(--color-bg-primary);
    border-left: 1px solid var(--color-border-light);
    transform: translateX(100%);
    transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.marketplace-filter-drawer.active .marketplace-filter-panel,
.marketplace-filter-popup.active .marketplace-filter-content {
    transform: translateX(0);
}

body.dark-mode .marketplace-filter-content {
    box-shadow: -4px 0 16px rgba(0, 0, 0, 0.5);
}

.marketplace-filter-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 24px;
    border-bottom: 1px solid var(--color-border-light);
    background: var(--color-bg-primary);
}

.marketplace-filter-title {
    font-size: 15px;
    font-weight: 500;
    color: var(--color-text-primary);
    margin: 0;
}

.marketplace-filter-close {
    background: none;
    border: none;
    color: var(--color-text-tertiary);
    cursor: pointer;
    padding: 6px;
    line-height: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.15s ease;
}

.marketplace-filter-close:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
}

.marketplace-filter-body {
    padding: 24px;
    overflow-y: auto;
    flex: 1;
}

.marketplace-filter-section {
    margin-bottom: 32px;
}

.marketplace-filter-section:last-child {
    margin-bottom: 0;
}

.marketplace-filter-section-title {
    font-size: 12px;
    font-weight: 500;
    color: var(--color-text-tertiary);
    margin-bottom: 12px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.marketplace-filter-options {
    display: flex;
    flex-direction: column;
    gap: 6px;
}

.marketplace-filter-option {
    padding: 10px 14px;
    background: transparent;
    border: 1px solid var(--color-border-light);
    border-radius: 6px;
    color: var(--color-text-secondary);
    font-size: 14px;
    font-weight: 400;
    cursor: pointer;
    transition: all 0.15s ease;
    font-family: var(--font-family);
    text-align: left;
}

.marketplace-filter-option:hover {
    background: var(--color-bg-secondary);
    border-color: var(--color-border-medium);
    color: var(--color-text-primary);
}

.marketplace-filter-option.active {
    background: var(--color-text-primary);
    color: var(--color-bg-primary);
    border-color: var(--color-text-primary);
    font-weight: 500;
}

.marketplace-filter-footer {
    padding: 16px 24px;
    border-top: 1px solid var(--color-border-light);
    background: var(--color-bg-primary);
}

.marketplace-filter-clear {
    width: 100%;
    padding: 10px 16px;
    background: transparent;
    border: 1px solid var(--color-border-light);
    border-radius: 6px;
    color: var(--color-text-secondary);
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    font-family: var(--font-family);
}

.marketplace-filter-clear:hover {
    background: var(--color-bg-secondary);
    border-color: var(--color-border-medium);
    color: var(--color-text-primary);
}

/* Mobile adjustments */
@media (max-width: 768px) {
    .marketplace-filter-panel {
        max-width: 100%;
        width: 100%;
    }
}

.marketplace-filter-footer {
    display: flex;
    gap: 12px;
    padding: 20px 28px;
    border-top: 1px solid #222;
}

.marketplace-filter-clear,
.marketplace-filter-apply {
    flex: 1;
    padding: 12px 24px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid #333;
    font-family: var(--font-family);
}

.marketplace-filter-clear {
    background: transparent;
    color: #888;
}

.marketplace-filter-clear:hover {
    background: #1a1a1a;
    color: #fff;
    border-color: #444;
}

.marketplace-filter-apply {
    background: #fff;
    color: #000;
    border-color: #fff;
}

.marketplace-filter-apply:hover {
    background: #e5e5e5;
    border-color: #e5e5e5;
}

/* Light mode styles */
body:not(.dark-mode) .marketplace-filter-content {
    background: #ffffff;
    border-left-color: #e5e5e5;
    box-shadow: -4px 0 16px rgba(0, 0, 0, 0.1);
}

body:not(.dark-mode) .marketplace-filter-overlay {
    background: rgba(0, 0, 0, 0.4);
}

body:not(.dark-mode) .marketplace-filter-header {
    border-bottom-color: #e5e5e5;
}

body:not(.dark-mode) .marketplace-filter-title {
    color: #171717;
}

body:not(.dark-mode) .marketplace-filter-close {
    color: #666;
}

body:not(.dark-mode) .marketplace-filter-close:hover {
    color: #171717;
}

body:not(.dark-mode) .marketplace-filter-section-title {
    color: #666;
}

body:not(.dark-mode) .marketplace-filter-option {
    border-color: #d4d4d4;
    color: #666;
}

body:not(.dark-mode) .marketplace-filter-option:hover {
    background: #f5f5f5;
    color: #171717;
    border-color: #a3a3a3;
}

body:not(.dark-mode) .marketplace-filter-option.active {
    background: #171717;
    color: #fff;
    border-color: #171717;
}

body:not(.dark-mode) .marketplace-filter-footer {
    border-top-color: #e5e5e5;
}

body:not(.dark-mode) .marketplace-filter-clear {
    border-color: #d4d4d4;
    color: #666;
}

body:not(.dark-mode) .marketplace-filter-clear:hover {
    background: #f5f5f5;
    color: #171717;
    border-color: #a3a3a3;
}

body:not(.dark-mode) .marketplace-filter-apply {
    background: #171717;
    color: #fff;
    border-color: #171717;
}

body:not(.dark-mode) .marketplace-filter-apply:hover {
    background: #000;
    border-color: #000;
}

/* ==========================================
   SETUP GUIDE
   ========================================== */
.setup-guide-container {
    position: fixed;
    bottom: var(--space-6);
    right: var(--space-6);
    width: 280px;
    max-width: calc(100vw - var(--space-12));
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-light);
    border-radius: var(--border-radius-lg);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12), 0 2px 4px rgba(0, 0, 0, 0.08);
    z-index: 1000;
    opacity: 0;
    transform: translateY(20px) scale(0.95);
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    overflow: hidden;
    max-height: 400px;
}

.setup-guide-container.show {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: all;
}

.setup-guide-container.collapsed {
    max-height: 120px;
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), max-height 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.setup-guide-container.collapsed .setup-guide-content {
    max-height: 0;
    opacity: 0;
    padding: 0;
    overflow: hidden;
}

.setup-guide-container.collapsed .setup-guide-next-section {
    display: flex !important;
    opacity: 1;
    transition: opacity 0.3s ease 0.1s;
}

.setup-guide-header {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: var(--space-4);
    border-bottom: 1px solid var(--color-border-light);
    background: var(--color-bg-primary);
}

.setup-guide-header-content {
    flex: 1;
    min-width: 0;
}

.setup-guide-title {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin: 0 0 var(--space-1) 0;
    line-height: 1.3;
}

.setup-guide-progress-bar-container {
    margin-top: var(--space-2);
}

.setup-guide-progress-bar {
    width: 100%;
    height: 4px;
    background: var(--color-bg-tertiary);
    border-radius: 2px;
    overflow: hidden;
}

.setup-guide-progress-bar-fill {
    height: 100%;
    background: var(--color-brand-purple);
    border-radius: 2px;
    transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    width: 0%;
    position: relative;
    overflow: hidden;
}

.setup-guide-progress-bar-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    right: 0;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
    animation: shimmer 2s infinite;
}

@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(100%);
    }
}

.setup-guide-progress-bar-fill.completed {
    animation: progressComplete 0.6s ease;
}

@keyframes progressComplete {
    0% {
        transform: scaleX(1);
    }
    50% {
        transform: scaleX(1.02);
    }
    100% {
        transform: scaleX(1);
    }
}

.setup-guide-container.completed {
    animation: completionPulse 0.5s ease;
}

@keyframes completionPulse {
    0%, 100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.02);
    }
}

.setup-guide-next-section {
    display: none;
    align-items: center;
    gap: var(--space-1);
    margin-top: var(--space-2);
    opacity: 0;
    transition: opacity 0.3s ease;
}

.setup-guide-next-label {
    font-size: var(--font-size-xs);
    color: var(--color-text-tertiary);
    font-weight: var(--font-weight-medium);
}

.setup-guide-next-name {
    font-size: var(--font-size-xs);
    color: var(--color-brand-purple);
    font-weight: var(--font-weight-semibold);
}

.setup-guide-actions {
    display: flex;
    align-items: center;
    gap: var(--space-1);
    flex-shrink: 0;
    margin-left: var(--space-2);
}

.setup-guide-toggle {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-md);
    color: var(--color-text-tertiary);
    cursor: pointer;
    transition: background-color 0.15s ease, color 0.15s ease;
}

.setup-guide-toggle:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
}

.setup-guide-toggle svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
}

.setup-guide-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 28px;
    padding: 0;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-md);
    color: var(--color-text-tertiary);
    cursor: pointer;
    transition: background-color 0.15s ease, color 0.15s ease;
}

.setup-guide-close:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
}

.setup-guide-close svg {
    width: 16px;
    height: 16px;
    stroke: currentColor;
}

.setup-guide-content {
    max-height: 300px;
    overflow-y: auto;
    padding: var(--space-2) 0;
    transition: opacity 0.3s ease, max-height 0.3s ease, padding 0.3s ease;
    opacity: 1;
}

.setup-guide-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

.setup-guide-item {
    display: flex;
    align-items: center;
    padding: var(--space-2) var(--space-4);
    transition: all 0.2s ease;
    cursor: pointer;
    position: relative;
}

.setup-guide-item:hover {
    background: var(--color-bg-secondary);
    transform: translateX(2px);
}

.setup-guide-item:not(.visited) {
    animation: subtlePulse 2s ease-in-out infinite;
}

@keyframes subtlePulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.85;
    }
}

.setup-guide-item.visited {
    opacity: 0.6;
    animation: none;
}

.setup-guide-item.just-visited {
    animation: checkmarkPop 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes checkmarkPop {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
        background: var(--color-brand-purple-light);
    }
    100% {
        transform: scale(1);
    }
}


.setup-guide-item-name {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
    flex: 1;
    transition: color 0.15s ease, text-decoration 0.15s ease;
}

.setup-guide-item.visited .setup-guide-item-name {
    color: var(--color-text-tertiary);
    text-decoration: line-through;
}

/* Mobile responsive */
@media (max-width: 768px) {
    .setup-guide-container {
        bottom: var(--space-4);
        right: var(--space-4);
        left: var(--space-4);
        width: auto;
        max-width: none;
    }
}

/* Dark mode - uses same colors as dashboard */
body.dark-mode .setup-guide-container {
    background: var(--color-bg-primary);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Light mode - enhanced shadow for better visibility */
body.light-mode .setup-guide-container {
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1);
}

body.dark-mode .setup-guide-header {
    background: var(--color-bg-primary);
    border-bottom-color: var(--color-border-light);
}

body.dark-mode .setup-guide-progress-bar {
    background: var(--color-bg-tertiary);
}

/* ==========================================
   SETUP GUIDE PROGRESS BADGE (Minimized)
   ========================================== */
.setup-guide-progress-badge {
    position: fixed;
    bottom: var(--space-6);
    right: var(--space-6);
    min-width: 140px;
    height: 40px;
    background: rgba(240, 240, 240, 0.5);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: none;
    border-radius: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 4px rgba(0, 0, 0, 0.06);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 1000;
    opacity: 0;
    transform: scale(0) translateY(10px);
    transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    pointer-events: none;
    padding: 0 var(--space-4);
}

.setup-guide-progress-badge.show {
    opacity: 1;
    transform: scale(1) translateY(0);
    pointer-events: all;
}

.setup-guide-progress-badge:hover {
    transform: scale(1.02) translateY(-2px);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 1px 4px rgba(0, 0, 0, 0.06);
}

.setup-guide-badge-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: var(--space-3);
    width: 100%;
    height: 100%;
}

.setup-guide-badge-text {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    white-space: nowrap;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    line-height: 1;
    height: 100%;
}

.setup-guide-badge-progress-wrapper {
    width: 24px;
    height: 24px;
    position: relative;
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0;
}

.setup-guide-circle-svg {
    width: 100%;
    height: 100%;
    transform: rotate(-90deg);
}

.setup-guide-circle-bg {
    fill: none;
    stroke: var(--color-bg-tertiary);
    stroke-width: 2;
}

.setup-guide-circle-progress {
    fill: none;
    stroke: var(--color-brand-purple);
    stroke-width: 2;
    stroke-linecap: round;
    transition: stroke-dasharray 0.3s ease;
}


/* Minimized state for main container */
.setup-guide-container.minimized {
    opacity: 0;
    transform: scale(0);
    pointer-events: none;
    max-height: 0;
}

/* Light mode badge */
body.light-mode .setup-guide-progress-badge {
    background: rgba(235, 235, 235, 0.6);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1), 0 1px 4px rgba(0, 0, 0, 0.06);
}

body.light-mode .setup-guide-progress-badge:hover {
    background: rgba(230, 230, 230, 0.7);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12), 0 2px 6px rgba(0, 0, 0, 0.08);
}

/* Dark mode badge */
body.dark-mode .setup-guide-progress-badge {
    background: rgba(20, 20, 20, 0.6);
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
}

body.dark-mode .setup-guide-progress-badge:hover {
    background: rgba(25, 25, 25, 0.7);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3), 0 3px 8px rgba(0, 0, 0, 0.2);
}

/* ==========================================
   HELP SECTION - POLISHED DESIGN
   Reference: Stripe, Discord, Roblox
   ========================================== */

.help-container {
    max-width: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
}

/* Help Search */
.help-search-wrapper {
    margin-bottom: var(--space-10);
    display: flex;
    width: 100%;
}

.help-search-input-wrapper {
    position: relative;
    width: 100%;
    flex: 1;
    max-width: none;
}

.help-search-icon {
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    color: #666;
    pointer-events: none;
}

.help-search-field {
    width: 100%;
    padding: 10px 40px 10px 28px;
    font-family: var(--font-family);
    font-size: 14px;
    color: var(--color-text-primary);
    background: transparent;
    border: none;
    border-bottom: 1px solid #333;
    border-radius: 0;
    transition: border-color 0.2s ease;
}

/* Light mode: keep search field border gray, not black */
body.light-mode .help-search-field {
    border-bottom-color: var(--color-border-light);
}

.help-search-field:focus {
    outline: none;
    border-bottom-color: #666;
}

/* Light mode: keep focus border gray */
body.light-mode .help-search-field:focus {
    border-bottom-color: var(--color-border-medium);
}

.help-search-field::placeholder {
    color: #666;
}

.help-search-clear {
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%);
    background: none;
    border: none;
    color: #666;
    cursor: pointer;
    padding: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 0;
    transition: color 0.2s ease;
    z-index: 1;
}

.help-search-clear:hover {
    background: none;
    color: #fff;
}

.help-search-clear svg {
    width: 16px;
    height: 16px;
}

/* Questions Section */
.help-questions {
    margin-bottom: var(--space-10);
}

.help-questions-title {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-quaternary);
    margin: 0 0 var(--space-4) 0;
}

.help-questions-list {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.help-question-wrapper {
    display: flex;
    flex-direction: column;
    border-bottom: 1px solid var(--color-border-light);
}

.help-question-wrapper:last-child {
    border-bottom: none;
}

.help-question {
    display: flex;
    align-items: flex-start;
    justify-content: space-between;
    padding: var(--space-5) 0;
    background: transparent;
    border: none;
    border-radius: 0;
    text-decoration: none;
    color: inherit;
    transition: all 0.15s ease;
    cursor: pointer;
    gap: var(--space-4);
}

.help-question:hover {
    opacity: 1;
    color: var(--color-text-primary);
}

.help-question.active {
    color: white;
}

.help-question.active .help-question-text {
    color: white;
}

.help-question.active .help-question-preview {
    color: white;
}

.help-question.active .help-question-arrow {
    color: white;
    transform: rotate(0deg); /* Rotate to point down when open */
}

body.light-mode .help-question.active,
body.light-mode .help-question.active .help-question-text,
body.light-mode .help-question.active .help-question-preview,
body.light-mode .help-question.active .help-question-arrow {
    color: var(--color-text-primary);
}


.help-question-content {
    flex: 1;
    min-width: 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.help-question-text {
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
    margin: 0 0 var(--space-1) 0;
    line-height: 1.5;
    letter-spacing: -0.01em;
}

.help-question-preview {
    font-size: var(--font-size-sm);
    color: var(--color-text-tertiary);
    margin: 0;
    line-height: 1.5;
    opacity: 0.8;
}

.help-question-arrow {
    flex-shrink: 0;
    align-self: flex-start;
    color: var(--color-text-tertiary);
    transition: transform 0.2s ease, color 0.15s ease;
    margin-top: 4px;
    transform: rotate(180deg);
    opacity: 0.6;
}

.help-question:hover .help-question-arrow {
    color: var(--color-text-secondary);
    opacity: 1;
}

.help-question-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.25s ease, padding 0.25s ease, margin 0.25s ease, opacity 0.25s ease;
    padding: 0;
    margin: 0;
    opacity: 0;
}

.help-question-answer.active {
    max-height: 600px;
    padding: var(--space-4) 0 var(--space-2) 0;
    margin: 0;
    opacity: 1;
}

.help-question-answer ul {
    list-style: none;
    padding: 0;
    margin: 0;
}

.help-question-answer li {
    color: var(--color-text-secondary);
    font-size: 14px;
    line-height: 1.7;
    margin: 0 0 var(--space-3) 0;
    padding-left: var(--space-5);
    position: relative;
}

.help-question-answer li:last-child {
    margin-bottom: 0;
}

.help-question-answer li::before {
    content: "";
    position: absolute;
    left: 0;
    color: var(--color-text-tertiary);
    font-weight: normal;
    opacity: 0.6;
}

.help-question-answer p {
    color: var(--color-text-secondary);
    font-size: 14px;
    line-height: 1.7;
    margin: 0;
}

.help-no-results {
    grid-column: 1 / -1;
    text-align: center;
    padding: var(--space-8) var(--space-4);
    color: var(--color-text-secondary);
    font-size: var(--font-size-base);
}

.help-view-more {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-2);
    margin: var(--space-8) auto 0;
    padding: var(--space-3) var(--space-6);
    background: transparent;
    border: 1px solid var(--color-border-primary);
    border-radius: var(--border-radius-md);
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s ease;
    max-width: 200px;
}

.help-view-more:hover {
    background: transparent;
    border-color: var(--color-border-primary);
    color: white;
}

.help-view-more svg {
    transition: transform 0.2s ease, color 0.2s ease;
}

.help-view-more:hover svg {
    transform: translateY(2px);
    color: white;
}

.help-view-more.hidden {
    display: none;
}

body.dark-mode .help-view-more {
    border-color: var(--color-border-primary);
}

body.dark-mode .help-view-more:hover {
    background: transparent;
    border-color: var(--color-border-primary);
    color: white;
}

/* Contact Section */
.help-contact {
    margin-top: var(--space-10);
    padding-top: var(--space-6);
    border-top: none;
}

#help {
    padding-bottom: var(--space-2);
}

.help-contact-content {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
}

.help-contact-title {
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-semibold);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--color-text-quaternary);
    margin: 0 0 var(--space-1) 0;
}

.help-contact-description {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    margin: 0 0 var(--space-4) 0;
    line-height: 1.5;
}

.help-contact-links {
    display: flex;
    gap: var(--space-4);
    border-top: 1px solid var(--color-border-light);
    padding-top: var(--space-2);
    font-size: var(--font-size-sm);
}

.help-contact-links a {
    color: var(--color-text-secondary);
    text-decoration: none;
    letter-spacing: 0.03em;
    text-transform: uppercase;
    transition: color 0.2s ease;
}

.help-contact-links a:hover {
    color: var(--color-text-primary);
}

/* Responsive Design */
@media (max-width: 768px) {
    .help-container {
        padding: 0;
    }

    .help-questions-title {
        font-size: 16px;
    }

    .help-question {
        padding: var(--space-4) 0;
        flex-direction: row;
        align-items: flex-start;
    }

    .help-question-arrow {
        align-self: center;
        margin-top: 0;
        margin-left: var(--space-4);
    }

    .help-question-text {
        font-size: var(--font-size-sm);
    }

    .help-question-preview {
        font-size: var(--font-size-xs);
    }

    .help-search-field {
        padding: 10px 40px 10px 28px;
        font-size: 14px;
    }

    .help-search-icon {
        left: 0;
        width: 18px;
        height: 18px;
    }

    .help-contact {
        margin-top: var(--space-8);
        padding-top: var(--space-6);
    }
    
    .help-contact-links {
        flex-direction: column;
        gap: var(--space-2);
    }
}

/* ==========================================
   IMAGE CROPPER MODAL
   ========================================== */
.image-cropper-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
}

.image-cropper-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
}

.image-cropper-content {
    position: relative;
    background: var(--color-bg-elevated);
    border: 1px solid var(--color-border-light);
    border-radius: 8px;
    width: 90%;
    max-width: 600px;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
}

.image-cropper-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-4);
    border-bottom: 1px solid var(--color-border-light);
}

.image-cropper-header h3 {
    font-size: var(--font-size-lg);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin: 0;
}

.image-cropper-header h3::before {
    content: '';
    display: inline-block;
    width: 4px;
    height: 18px;
    background: var(--color-brand-purple);
    border-radius: 2px;
    margin-right: 8px;
    vertical-align: middle;
}

.cropper-close-btn {
    background: none;
    border: none;
    font-size: 28px;
    line-height: 1;
    color: var(--color-text-secondary);
    cursor: pointer;
    padding: 0;
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 4px;
    transition: all 0.15s ease;
}

.cropper-close-btn:hover {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
}

.image-cropper-body {
    padding: var(--space-4);
    flex: 1;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
}

.cropper-container {
    width: 100%;
    max-height: 400px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.cropper-container img {
    max-width: 100%;
    max-height: 400px;
    display: block;
}

.image-cropper-actions {
    display: flex;
    gap: var(--space-3);
    padding: var(--space-4);
    border-top: 1px solid var(--color-border-light);
    justify-content: flex-end;
}

.cropper-btn-cancel,
.cropper-btn-upload {
    padding: var(--space-2) var(--space-4);
    border-radius: 6px;
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.15s ease;
    border: none;
}

.cropper-btn-cancel {
    background: var(--color-bg-secondary);
    color: var(--color-text-primary);
}

.cropper-btn-cancel:hover {
    background: var(--color-bg-tertiary);
}

.cropper-btn-upload {
    background: var(--color-brand-purple);
    color: white;
}

.cropper-btn-upload:hover {
    background: var(--color-brand-purple-dark);
}

/* Cropper.js overrides for clean look with purple branding */
.cropper-view-box,
.cropper-face {
    border-radius: 50%;
}

.cropper-view-box {
    box-shadow: 0 0 0 2px var(--color-brand-purple);
    outline: 0;
}

.cropper-line {
    background-color: var(--color-brand-purple);
}

.cropper-point {
    background-color: var(--color-brand-purple);
    width: 10px;
    height: 10px;
    opacity: 1;
    border: 2px solid white;
    border-radius: 50%;
}

.cropper-point.point-se {
    width: 12px;
    height: 12px;
}

.cropper-bg {
    background-image: none;
}

/* Purple crop box border */
.cropper-crop-box {
    border: 2px solid var(--color-brand-purple);
}

/* Darken outside area a bit more for contrast */
.cropper-modal {
    background-color: rgba(0, 0, 0, 0.6);
}

/* Dark mode support */
[data-theme="dark"] .image-cropper-content {
    background: #1a1a1a;
    border-color: #333;
}

[data-theme="dark"] .image-cropper-header {
    border-bottom-color: #333;
}

[data-theme="dark"] .image-cropper-actions {
    border-top-color: #333;
}

[data-theme="dark"] .cropper-btn-cancel {
    background: #2a2a2a;
    color: #e5e5e5;
}

[data-theme="dark"] .cropper-btn-cancel:hover {
    background: #333;
}

/* ==========================================
   SUBSCRIPTION UI STYLES
   ========================================== */

/* ==========================================
   PLANS SECTION - MODERN PROFILE-STYLE DESIGN
   ========================================== */
.plan-field {
    display: flex;
    flex-direction: column;
    gap: var(--space-4);
    padding: var(--space-6) 0;
    position: relative;
    border-bottom: 1px solid var(--color-border-light);
}

.plan-field:last-child {
    border-bottom: none;
}

.plan-field-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-4);
}

.plan-field-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.plan-name-with-price {
    display: flex;
    align-items: baseline;
    gap: var(--space-2);
    flex-wrap: wrap;
}

.plan-name-primary {
    font-size: 18px;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    letter-spacing: -0.01em;
}

.plan-price-inline {
    font-size: 16px;
    font-weight: var(--font-weight-normal);
    color: var(--color-text-tertiary);
}

.plan-current-badge-wrapper {
    margin-top: var(--space-1);
}

.plan-current-badge {
    font-size: 11px;
    font-weight: var(--font-weight-medium);
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.plan-field-action {
    flex-shrink: 0;
    display: flex;
    align-items: center;
}

.plan-action-link {
    display: inline-flex;
    align-items: center;
    font-size: 14px;
    font-weight: var(--font-weight-medium);
    color: var(--color-text-tertiary);
    text-decoration: none;
    padding: 0;
    background: none;
    border: none;
    cursor: pointer;
    transition: color 0.15s ease;
}

.plan-action-link:hover {
    color: var(--color-text-primary);
}

.plan-action-link svg {
    transition: transform 0.15s ease;
}

.plan-action-link:hover svg {
    transform: translateX(2px);
}

/* Redirecting pulse animation */
.redirecting-pulse {
    animation: smooth-pulse 2s ease-in-out infinite;
}

@keyframes smooth-pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.4;
    }
}

.plan-features-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
    margin-top: var(--space-2);
}

.plan-feature-item {
    display: flex;
    align-items: flex-start;
    gap: var(--space-2);
    font-size: 14px;
    color: var(--color-text-secondary);
    line-height: 1.5;
}

.plan-feature-item svg {
    margin-top: 2px;
    flex-shrink: 0;
}

.plan-feature-item span {
    flex: 1;
}

/* ==========================================
   BILLING HISTORY
   ========================================== */
.billing-history-item {
    padding: var(--space-6) 0;
    border-bottom: 1px solid var(--color-border-light);
}

.billing-history-item:last-child {
    border-bottom: none;
}

.billing-history-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-4);
    margin-bottom: var(--space-2);
}

.billing-history-main {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-2);
}

.billing-history-label {
    font-size: 11px;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-tertiary);
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.billing-history-value {
    display: flex;
    align-items: baseline;
    gap: var(--space-2);
    flex-wrap: wrap;
}

.billing-history-date {
    flex-shrink: 0;
}

.billing-history-description {
    margin-top: var(--space-2);
    margin-bottom: var(--space-3);
}

.billing-history-actions {
    margin-top: var(--space-3);
    display: flex;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-2);
}

.subscription-active {
    padding: 2rem;
}

.subscription-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.subscription-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 4px;
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
}

.subscription-badge.active {
    background: rgba(34, 197, 94, 0.1);
    color: #22c55e;
}

.subscription-header h3 {
    font-size: var(--font-size-xl);
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-primary);
    margin: 0;
}

.subscription-details {
    margin-bottom: 1.5rem;
}

.subscription-detail-item {
    display: flex;
    justify-content: space-between;
    padding: 0.75rem 0;
    border-bottom: 1px solid var(--color-border-light);
}

.subscription-detail-item:last-child {
    border-bottom: none;
}

.detail-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-tertiary);
}

.detail-value {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-text-primary);
}

.subscription-actions {
    margin-top: 1.5rem;
}

.subscription-actions .btn {
    padding: 0.75rem 1.5rem;
    border-radius: 6px;
    font-size: var(--font-size-base);
    font-weight: var(--font-weight-medium);
    cursor: pointer;
    transition: all 0.2s ease;
}

.btn-primary {
    background: var(--color-brand-purple);
    color: white;
    border: none;
}

.btn-primary:hover {
    background: var(--color-brand-purple-dark);
}

.loading-spinner {
    width: 24px;
    height: 24px;
    border: 2px solid var(--color-border-light);
    border-top-color: var(--color-brand-purple);
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

[data-theme="dark"] .subscription-plan-card {
    background: var(--color-bg-primary);
    border-color: var(--color-border-light);
}

[data-theme="dark"] .subscription-plan-card:hover {
    box-shadow: 0 2px 8px rgba(164, 118, 255, 0.2);
}

/* ==========================================
   MOBILE OPTIMIZATION
   Content centered, text left-aligned, clean dividers
   ========================================== */

/* Tablet and below */
@media (max-width: 1024px) {
    .dashboard-content {
        padding-left: var(--space-4);
        padding-right: var(--space-4);
    }
    
    .content-section {
        max-width: 100%;
        margin: 0 auto;
    }
    
    .card {
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
    }
    
    /* Profile fields - centered container, left-aligned text */
    .profile-info-container {
        max-width: 100%;
        margin: 0 auto;
    }
    
    .profile-info-content {
        max-width: 100%;
    }
    
    /* Dividers optimization */
    .profile-field {
        border-bottom: 1px solid var(--color-border-light);
        padding-left: 0;
        padding-right: 0;
    }
    
    .profile-field:last-child {
        border-bottom: none;
    }
}

/* Mobile phones and small tablets */
@media (max-width: 768px) {
    /* Center content containers */
    .dashboard-content {
        padding: var(--space-4) var(--space-4);
        padding-top: calc(var(--header-height) + var(--space-4));
        max-width: 100%;
        width: 100%;
        margin: 0 auto;
        overflow-x: hidden;
        box-sizing: border-box;
    }
    
    .content-section {
        max-width: 100%;
        width: 100%;
        margin: 0 auto;
        padding: 0;
        overflow-x: hidden;
        box-sizing: border-box;
    }
    
    /* Ensure profile section doesn't overflow */
    #profile {
        width: 100%;
        max-width: 100%;
        overflow-x: hidden;
        box-sizing: border-box;
    }
    
    .card {
        max-width: 100%;
        margin-left: auto;
        margin-right: auto;
        padding: var(--space-4);
    }
    
    /* Profile section mobile optimization - already handled above in profile-specific media query */
    
    /* Stats grid */
    .stats-grid {
        grid-template-columns: 1fr;
        gap: var(--space-4);
        max-width: 100%;
        margin: 0 auto;
    }
    
    /* Programs grid */
    .programs-grid {
        grid-template-columns: 1fr;
        gap: var(--space-4);
        max-width: 100%;
        margin: 0 auto;
    }
    
    /* Payment sections */
    .payment-section-tabs {
        max-width: 100%;
        margin: 0 auto;
    }
    
    /* Payment subsections - only show active ones */
    #payment .profile-subsection:not(.active) {
        display: none !important;
    }
    
    #payment .profile-subsection.active {
        display: block !important;
    }
    
    /* Plans section - mobile optimization */
    #plansContent {
        display: flex;
        flex-direction: column;
        gap: var(--space-8);
        padding: var(--space-2) 0;
    }
    
    .plan-field {
        max-width: 100%;
        width: 100%;
        margin: 0;
        padding: 0 0 var(--space-6) 0;
        text-align: left;
        background: transparent;
        border: none;
        border-bottom: 1px solid var(--color-border-light);
        border-radius: 0;
        gap: var(--space-5);
    }
    
    .plan-field:last-child {
        border-bottom: none;
        padding-bottom: 0;
    }
    
    .plan-field-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-4);
        text-align: left;
        width: 100%;
    }
    
    .plan-field-main {
        width: 100%;
        text-align: left;
        gap: var(--space-3);
    }
    
    .plan-name-with-price {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-1);
    }
    
    .plan-name-primary {
        font-size: var(--font-size-xl);
        line-height: 1.3;
        font-weight: var(--font-weight-semibold);
    }
    
    .plan-price-inline {
        font-size: var(--font-size-base);
        margin-top: 2px;
        color: var(--color-text-secondary);
    }
    
    .plan-current-badge-wrapper {
        margin-top: var(--space-2);
    }
    
    .plan-current-badge {
        font-size: 10px;
        padding: 4px 8px;
        display: inline-block;
        background: var(--color-bg-secondary);
        border-radius: 4px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }
    
    .plan-field-action {
        width: 100%;
        text-align: left;
        margin-top: 0;
        padding-top: 0;
        border-top: none;
    }
    
    .plan-action-link {
        font-size: var(--font-size-base);
        display: inline-flex;
        align-items: center;
        width: auto;
        color: var(--color-text-primary);
        font-weight: var(--font-weight-medium);
    }
    
    .plan-action-link:hover {
        color: var(--color-text-primary);
    }
    
    .plan-features-list {
        margin-top: var(--space-4);
        padding-top: 0;
        border-top: none;
        width: 100%;
        gap: var(--space-3);
    }
    
    .plan-feature-item {
        padding: 0;
        font-size: var(--font-size-base);
        line-height: 1.6;
        color: var(--color-text-secondary);
    }
    
    .plan-feature-item svg {
        width: 14px;
        height: 14px;
        margin-right: var(--space-2);
        margin-top: 3px;
        stroke: var(--color-text-secondary);
    }
    
    /* Subscription info */
    .subscription-info-section {
        max-width: 100%;
        margin: 0 auto;
    }
    
    .subscription-field {
        text-align: left;
        border-bottom: 1px solid var(--color-border-light);
        padding: var(--space-3) 0;
    }
    
    /* Billing history */
    .billing-history-item {
        max-width: 100%;
        margin: 0 auto;
        text-align: left;
    }
}

/* Mobile optimization for filters */
@media (max-width: 768px) {
    /* Marketplace section header */
    .marketplace-header {
        flex-direction: column;
        gap: 16px;
        margin-bottom: 20px;
    }
    
    .marketplace-filter-dropdown {
        margin-top: 16px;
        padding: 16px 0;
        background: var(--color-bg-primary);
        overflow: hidden;
        max-width: 100%;
    }
    
    .filter-row {
        margin-bottom: 24px;
        overflow: hidden;
        max-width: 100%;
    }
    
    .filter-row:last-of-type {
        margin-bottom: 16px;
    }
    
    .filter-group {
        flex-direction: column;
        align-items: flex-start;
        gap: 12px;
        max-width: 100%;
        overflow: hidden;
    }
    
    .filter-label {
        font-size: 13px;
        font-weight: 500;
        width: 100%;
        color: var(--color-text-secondary);
        margin-bottom: 4px;
    }
    
    .filter-options {
        gap: 32px;
        width: 100%;
        max-width: 100%;
        overflow-x: auto;
        overflow-y: visible;
        -webkit-overflow-scrolling: touch;
        padding-bottom: 4px;
        padding-right: 16px;
        flex-wrap: nowrap;
        scrollbar-width: none;
        -ms-overflow-style: none;
        position: relative;
        min-height: 30px;
    }
    
    .filter-options::-webkit-scrollbar {
        display: none;
    }
    
    .filter-chip {
        font-size: 13px;
        flex-shrink: 0;
        white-space: nowrap;
        padding: 4px 0 2px 0;
        position: relative;
    }
    
    .filter-underline {
        bottom: 2px;
        height: 2px !important;
        z-index: 10;
        background: #a476ff !important;
        will-change: left, width;
        display: block !important;
        visibility: visible !important;
    }
    
    /* Make sure underline is visible when it has width (is positioned) */
    .filter-underline[style*="width"] {
        opacity: 1 !important;
    }
    
    /* Force visibility for active chips - TEST: Make it always visible on first chip */
    .filter-options .filter-chip.active ~ .filter-underline,
    .filter-options:has(.filter-chip.active) .filter-underline {
        opacity: 1 !important;
        visibility: visible !important;
    }
    
    
    /* Make search bar and filter button side by side like desktop */
    .search-container {
        flex-direction: row;
        gap: 12px;
        width: 100%;
        max-width: 100%;
        align-items: center;
    }
    
    .marketplace-search-wrapper {
        flex: 1;
        max-width: none;
    }
    
    .filter-toggle-btn {
        flex-shrink: 0;
        padding: 10px 0;
        font-size: 13px;
    }
    
    /* Marketplace grid optimization */
    .marketplace-grid,
    .programs-grid {
        grid-template-columns: 1fr;
        gap: 20px;
    }
    
    /* Course cards */
    .marketplace-course-card {
        min-height: 320px;
    }
    
    .marketplace-course-content {
        padding: 20px;
    }
    
    .marketplace-course-title {
        font-size: 18px;
        line-height: 1.4;
    }
    
    .marketplace-course-rating {
        font-size: 13px;
    }
    
    .marketplace-course-enroll-btn {
        width: 100%;
        padding: 12px 20px;
        font-size: 14px;
    }
}

/* Small phones */
@media (max-width: 480px) {
    .dashboard-content {
        padding: var(--space-3) var(--space-3);
        padding-top: calc(var(--header-height) + var(--space-3));
    }
    
    .card {
        padding: var(--space-3);
        margin-bottom: var(--space-4);
    }
    
    .profile-field {
        padding: var(--space-4) 0;
        gap: var(--space-3);
    }
    
    .card-header {
        margin-bottom: var(--space-3);
    }
    
    .card-title {
        font-size: var(--font-size-base);
    }
    
    /* Even cleaner dividers on small screens */
    .profile-field {
        border-bottom-width: 1px;
    }
    
    /* Profile tabs */
    .profile-tabs {
        gap: var(--space-2);
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
    }
    
    .profile-tab {
        font-size: var(--font-size-xs);
        padding: var(--space-2) var(--space-3);
        white-space: nowrap;
    }
    
    /* Tighter filter spacing on small screens */
    .marketplace-filter-dropdown {
        margin-top: 12px;
        padding: 12px 0;
    }
    
    .filter-options {
        gap: 24px;
    }
    
    .filter-chip {
        font-size: 12px;
        padding: 2px 0;
    }
    
    .filter-label {
        font-size: 12px;
    }
    
    .filter-row {
        margin-bottom: 18px;
    }
    
    .filter-row:last-of-type {
        margin-bottom: 12px;
    }
}

/* Landscape tablets */
@media (min-width: 769px) and (max-width: 1024px) and (orientation: landscape) {
    .dashboard-content {
        padding: var(--space-5) var(--space-6);
        padding-top: calc(var(--header-height) + var(--space-5));
    }
    
    .card {
        max-width: 100%;
        margin: 0 auto;
    }
    
    .profile-info-container {
        max-width: 100%;
        margin: 0 auto;
    }
}
